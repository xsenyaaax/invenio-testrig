running extract_messages
extracting messages from invenio_access/__init__.py (encoding="utf-8")
extracting messages from invenio_access/admin.py (encoding="utf-8")
extracting messages from invenio_access/cli.py (encoding="utf-8")
extracting messages from invenio_access/config.py (encoding="utf-8")
extracting messages from invenio_access/ext.py (encoding="utf-8")
extracting messages from invenio_access/factory.py (encoding="utf-8")
extracting messages from invenio_access/loaders.py (encoding="utf-8")
extracting messages from invenio_access/models.py (encoding="utf-8")
extracting messages from invenio_access/permissions.py (encoding="utf-8")
extracting messages from invenio_access/proxies.py (encoding="utf-8")
extracting messages from invenio_access/utils.py (encoding="utf-8")
extracting messages from invenio_access/alembic/04480be1593e_add_actionsystemroles.py (encoding="utf-8")
extracting messages from invenio_access/alembic/2069a982633b_add_on_delete_cascade_constraint.py (encoding="utf-8")
extracting messages from invenio_access/alembic/2f63be7b7572_create_access_tables.py (encoding="utf-8")
extracting messages from invenio_access/alembic/67ba0de65fbb_create_access_branch.py (encoding="utf-8")
extracting messages from invenio_access/alembic/842a62b56e60_change_fk_accountsrole_to_string_downgrade.py (encoding="utf-8")
extracting messages from invenio_access/alembic/dbe499bfda43_prevent_null_in_actionusers_for_.py (encoding="utf-8")
extracting messages from invenio_access/alembic/f9843093f686_change_fk_accountsrole_to_string_upgrade.py (encoding="utf-8")
writing PO template file to /dev/null
 redis Pulling 
 postgresql Pulling 
 redis Pulled 
 postgresql Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-redis-1  Started
 Container docker_services_cli-postgresql-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_access
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 114 items

tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/test_admin.py::ISORT PASSED
tests/test_admin.py::black PASSED
tests/test_admin.py::test_admin PASSED
tests/test_cli.py::ISORT PASSED
tests/test_cli.py::black PASSED
tests/test_cli.py::test_access_cli_allow_action_empty PASSED
tests/test_cli.py::test_access_cli_allow_action_unknown_email PASSED

tests/test_cli.py::test_access_cli_allow_action_unknown_role PASSED

tests/test_cli.py::test_access_cli_allow_action_user PASSED

tests/test_cli.py::test_any_all_global PASSED

tests/test_cli.py::test_access_cli_allow_action_role PASSED

tests/test_cli.py::test_access_cli_deny_action_role PASSED

tests/test_cli.py::test_access_cli_list PASSED
tests/test_cli.py::test_access_matrix PASSED

tests/test_invenio_access.py::ISORT PASSED
tests/test_invenio_access.py::black PASSED
tests/test_invenio_access.py::test_version PASSED
tests/test_invenio_access.py::test_init PASSED
tests/test_invenio_access.py::test_init_app PASSED
tests/test_invenio_access.py::test_actions PASSED
tests/test_invenio_access.py::test_system_roles PASSED
tests/test_invenio_access.py::test_entrypoints PASSED
tests/test_invenio_access.py::test_alembic PASSED

tests/test_loaders.py::ISORT PASSED
tests/test_loaders.py::black PASSED
tests/test_loaders.py::test_load_permissions_on_request_loaded PASSED
tests/test_loaders.py::test_load_permissions_on_identity_loaded PASSED

tests/test_loaders.py::test_disabled_loader PASSED
tests/test_permissions.py::ISORT PASSED
tests/test_permissions.py::black PASSED
tests/test_permissions.py::test_allow_by_user_id PASSED

tests/test_permissions.py::test_deny_by_user_id PASSED

tests/test_permissions.py::test_allow_deny_by_user_id PASSED

tests/test_permissions.py::test_allow_by_role PASSED

tests/test_permissions.py::test_deny_by_role PASSED

tests/test_permissions.py::test_allow_by_user_id_and_role PASSED

tests/test_permissions.py::test_deny_by_user_id_and_role PASSED

tests/test_permissions.py::test_allow_by_action_expands_to_user_id PASSED

tests/test_permissions.py::test_deny_by_action_expands_to_user_id PASSED

tests/test_permissions.py::test_allow_by_action_expands_to_role PASSED

tests/test_permissions.py::test_deny_by_action_expands_to_role PASSED

tests/test_permissions.py::test_allow_by_action_expands_to_user_id_and_role PASSED

tests/test_permissions.py::test_deny_by_action_expands_to_user_id_and_role PASSED

tests/test_permissions.py::test_allow_by_action_expands_to_user_id_with_argument PASSED

tests/test_permissions.py::test_system_role_name PASSED
tests/test_permissions.py::test_system_roles PASSED

tests/test_permissions.py::test_allow_by_default PASSED

tests/test_permissions_cache.py::ISORT PASSED
tests/test_permissions_cache.py::black PASSED
tests/test_permissions_cache.py::test_invenio_access_permission_cache PASSED

tests/test_permissions_cache.py::test_invenio_access_permission_cache_redis PASSED

tests/test_permissions_cache.py::test_invenio_access_cache_performance PASSED

tests/test_permissions_cache.py::test_invenio_access_permission_cache_users_updates PASSED

tests/test_permissions_cache.py::test_invenio_access_permission_cache_roles_updates PASSED

tests/test_permissions_cache.py::test_invenio_access_permission_cache_system_roles_updates PASSED

tests/test_permissions_cache.py::test_dynamic_permission_needs_cache_invalidation PASSED

invenio_access/__init__.py::PYDOCSTYLE PASSED
invenio_access/__init__.py::ISORT PASSED
invenio_access/__init__.py::black PASSED
invenio_access/__init__.py::invenio_access PASSED

invenio_access/admin.py::PYDOCSTYLE PASSED
invenio_access/admin.py::ISORT PASSED
invenio_access/admin.py::black PASSED
invenio_access/alembic/04480be1593e_add_actionsystemroles.py::PYDOCSTYLE PASSED
invenio_access/alembic/04480be1593e_add_actionsystemroles.py::ISORT PASSED
invenio_access/alembic/04480be1593e_add_actionsystemroles.py::black PASSED
invenio_access/alembic/2069a982633b_add_on_delete_cascade_constraint.py::PYDOCSTYLE PASSED
invenio_access/alembic/2069a982633b_add_on_delete_cascade_constraint.py::ISORT PASSED
invenio_access/alembic/2069a982633b_add_on_delete_cascade_constraint.py::black PASSED
invenio_access/alembic/2f63be7b7572_create_access_tables.py::PYDOCSTYLE PASSED
invenio_access/alembic/2f63be7b7572_create_access_tables.py::ISORT PASSED
invenio_access/alembic/2f63be7b7572_create_access_tables.py::black PASSED
invenio_access/alembic/67ba0de65fbb_create_access_branch.py::PYDOCSTYLE PASSED
invenio_access/alembic/67ba0de65fbb_create_access_branch.py::ISORT PASSED
invenio_access/alembic/67ba0de65fbb_create_access_branch.py::black PASSED
invenio_access/alembic/842a62b56e60_change_fk_accountsrole_to_string_downgrade.py::PYDOCSTYLE PASSED
invenio_access/alembic/842a62b56e60_change_fk_accountsrole_to_string_downgrade.py::ISORT PASSED
invenio_access/alembic/842a62b56e60_change_fk_accountsrole_to_string_downgrade.py::black PASSED
invenio_access/alembic/dbe499bfda43_prevent_null_in_actionusers_for_.py::PYDOCSTYLE PASSED
invenio_access/alembic/dbe499bfda43_prevent_null_in_actionusers_for_.py::ISORT PASSED
invenio_access/alembic/dbe499bfda43_prevent_null_in_actionusers_for_.py::black PASSED
invenio_access/alembic/f9843093f686_change_fk_accountsrole_to_string_upgrade.py::PYDOCSTYLE PASSED
invenio_access/alembic/f9843093f686_change_fk_accountsrole_to_string_upgrade.py::ISORT PASSED
invenio_access/alembic/f9843093f686_change_fk_accountsrole_to_string_upgrade.py::black PASSED
invenio_access/cli.py::PYDOCSTYLE PASSED
invenio_access/cli.py::ISORT PASSED
invenio_access/cli.py::black PASSED
invenio_access/config.py::PYDOCSTYLE PASSED
invenio_access/config.py::ISORT PASSED
invenio_access/config.py::black PASSED
invenio_access/ext.py::PYDOCSTYLE PASSED
invenio_access/ext.py::ISORT PASSED
invenio_access/ext.py::black PASSED
invenio_access/factory.py::PYDOCSTYLE PASSED
invenio_access/factory.py::ISORT PASSED
invenio_access/factory.py::black PASSED
invenio_access/loaders.py::PYDOCSTYLE PASSED
invenio_access/loaders.py::ISORT PASSED
invenio_access/loaders.py::black PASSED
invenio_access/models.py::PYDOCSTYLE PASSED
invenio_access/models.py::ISORT PASSED
invenio_access/models.py::black PASSED
invenio_access/permissions.py::PYDOCSTYLE PASSED
invenio_access/permissions.py::ISORT PASSED
invenio_access/permissions.py::black PASSED
invenio_access/proxies.py::PYDOCSTYLE PASSED
invenio_access/proxies.py::ISORT PASSED
invenio_access/proxies.py::black PASSED
invenio_access/utils.py::PYDOCSTYLE PASSED
invenio_access/utils.py::ISORT PASSED
invenio_access/utils.py::black PASSED

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
    from crypt import crypt as _crypt

.venv/lib/python3.12/site-packages/flask_admin/contrib/__init__.py:2
    __import__('pkg_resources').declare_namespace(__name__)

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:3146
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

.venv/lib/python3.12/site-packages/flask_admin/contrib/__init__.py:2
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__('pkg_resources').declare_namespace(__name__)

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:2558
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(parent)

tests/test_cli.py::test_access_cli_allow_action_unknown_email
tests/test_cli.py::test_access_cli_allow_action_user
tests/test_cli.py::test_access_cli_allow_action_user
tests/test_cli.py::test_access_matrix
    return callback(*args, **kwargs)

tests/test_cli.py::test_access_cli_allow_action_unknown_role
tests/test_cli.py::test_access_cli_allow_action_role
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
    return callback(*args, **kwargs)

    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

tests/test_cli.py::test_any_all_global
tests/test_cli.py::test_any_all_global
    return callback(*args, **kwargs)

tests/test_cli.py::test_access_cli_deny_action_role
    return callback(*args, **kwargs)

    target.updated = datetime.utcnow()

tests/test_cli.py::test_access_matrix
    return callback(*args, **kwargs)

tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_loaders.py::test_load_permissions_on_identity_loaded
    _security.datetime_factory(),

tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
    return callback(*args, **kwargs)

tests/test_cli.py::test_access_matrix
tests/test_cli.py::test_access_matrix
    return callback(*args, **kwargs)

tests/test_invenio_access.py::test_alembic
    util.warn_deprecated(

tests/test_invenio_access.py::test_alembic
    super().alter_column(

tests/test_invenio_access.py::test_alembic
    insp = Inspector.from_engine(ctx.connection.engine)

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                                                Stmts   Miss  Cover   Missing
invenio_access/__init__.py                                                             15      4    73%   420-426
invenio_access/admin.py                                                                43      0   100%
invenio_access/alembic/2f63be7b7572_create_access_tables.py                            20      0   100%
invenio_access/alembic/67ba0de65fbb_create_access_branch.py                             8      0   100%
invenio_access/alembic/842a62b56e60_change_fk_accountsrole_to_string_downgrade.py      11      0   100%
invenio_access/alembic/2069a982633b_add_on_delete_cascade_constraint.py                19      0   100%
invenio_access/alembic/04480be1593e_add_actionsystemroles.py                           16      0   100%
invenio_access/alembic/dbe499bfda43_prevent_null_in_actionusers_for_.py                18      0   100%
invenio_access/alembic/f9843093f686_change_fk_accountsrole_to_string_upgrade.py        11      0   100%
invenio_access/cli.py                                                                 205     11    95%   44, 53-55, 111, 121, 131, 141, 150, 162, 174
invenio_access/config.py                                                                6      0   100%
invenio_access/ext.py                                                                  62      0   100%
invenio_access/factory.py                                                               7      0   100%
invenio_access/loaders.py                                                               6      0   100%
invenio_access/models.py                                                               95      0   100%
invenio_access/permissions.py                                                          84      0   100%
invenio_access/proxies.py                                                               4      0   100%
invenio_access/utils.py                                                                 9      0   100%
TOTAL                                                                                 639     15    98%
=============== 114 passed, 10293 warnings in 121.43s (0:02:01) ================
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
