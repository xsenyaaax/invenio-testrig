 redis Pulling 
 ae4ce04d0e1c Pulling fs layer 
 a4b3f7e54d4e Pulling fs layer 
 3ab924b113fe Pulling fs layer 
 71b80172ae45 Pulling fs layer 
 b08e1dddf844 Pulling fs layer 
 a2684f00dd15 Pulling fs layer 
 4f4fb700ef54 Pulling fs layer 
 9d331a63f5f9 Pulling fs layer 
 b08e1dddf844 Waiting 
 a2684f00dd15 Waiting 
 4f4fb700ef54 Waiting 
 9d331a63f5f9 Waiting 
 71b80172ae45 Waiting 
 a4b3f7e54d4e Downloading [==========================================>        ]     934B/1.099kB
 a4b3f7e54d4e Downloading [==================================================>]  1.099kB/1.099kB
 a4b3f7e54d4e Verifying Checksum 
 a4b3f7e54d4e Download complete 
 3ab924b113fe Downloading [==================================================>]     874B/874B
 3ab924b113fe Verifying Checksum 
 3ab924b113fe Download complete 
 ae4ce04d0e1c Downloading [>                                                  ]  290.2kB/28.23MB
 ae4ce04d0e1c Downloading [===============================>                   ]  17.85MB/28.23MB
 71b80172ae45 Downloading [>                                                  ]  15.12kB/1.438MB
 b08e1dddf844 Downloading [>                                                  ]  154.8kB/15.35MB
 71b80172ae45 Verifying Checksum 
 71b80172ae45 Download complete 
 ae4ce04d0e1c Downloading [=====================================>             ]   21.3MB/28.23MB
 ae4ce04d0e1c Verifying Checksum 
 ae4ce04d0e1c Download complete 
 ae4ce04d0e1c Extracting [>                                                  ]  294.9kB/28.23MB
 b08e1dddf844 Verifying Checksum 
 b08e1dddf844 Download complete 
 a2684f00dd15 Downloading [==================================================>]      96B/96B
 a2684f00dd15 Verifying Checksum 
 a2684f00dd15 Download complete 
 ae4ce04d0e1c Extracting [===========>                                       ]  6.488MB/28.23MB
 4f4fb700ef54 Downloading [==================================================>]      32B/32B
 4f4fb700ef54 Verifying Checksum 
 4f4fb700ef54 Download complete 
 9d331a63f5f9 Downloading [==================================================>]     573B/573B
 9d331a63f5f9 Verifying Checksum 
 9d331a63f5f9 Download complete 
 ae4ce04d0e1c Extracting [=================>                                 ]  10.03MB/28.23MB
 ae4ce04d0e1c Extracting [============================>                      ]  16.22MB/28.23MB
 ae4ce04d0e1c Extracting [=========================================>         ]  23.59MB/28.23MB
 ae4ce04d0e1c Extracting [==========================================>        ]  23.89MB/28.23MB
 ae4ce04d0e1c Extracting [===============================================>   ]  26.84MB/28.23MB
 ae4ce04d0e1c Extracting [================================================>  ]  27.43MB/28.23MB
 ae4ce04d0e1c Extracting [==================================================>]  28.23MB/28.23MB
 ae4ce04d0e1c Pull complete 
 a4b3f7e54d4e Extracting [==================================================>]  1.099kB/1.099kB
 a4b3f7e54d4e Extracting [==================================================>]  1.099kB/1.099kB
 a4b3f7e54d4e Pull complete 
 3ab924b113fe Extracting [==================================================>]     874B/874B
 3ab924b113fe Extracting [==================================================>]     874B/874B
 3ab924b113fe Pull complete 
 71b80172ae45 Extracting [=>                                                 ]  32.77kB/1.438MB
 71b80172ae45 Extracting [==================================================>]  1.438MB/1.438MB
 71b80172ae45 Extracting [==================================================>]  1.438MB/1.438MB
 71b80172ae45 Pull complete 
 b08e1dddf844 Extracting [>                                                  ]  163.8kB/15.35MB
 b08e1dddf844 Extracting [===========================>                       ]   8.52MB/15.35MB
 b08e1dddf844 Extracting [==================================================>]  15.35MB/15.35MB
 b08e1dddf844 Pull complete 
 a2684f00dd15 Extracting [==================================================>]      96B/96B
 a2684f00dd15 Extracting [==================================================>]      96B/96B
 a2684f00dd15 Pull complete 
 4f4fb700ef54 Extracting [==================================================>]      32B/32B
 4f4fb700ef54 Extracting [==================================================>]      32B/32B
 4f4fb700ef54 Pull complete 
 9d331a63f5f9 Extracting [==================================================>]     573B/573B
 9d331a63f5f9 Extracting [==================================================>]     573B/573B
 9d331a63f5f9 Pull complete 
 redis Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-redis-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_cache
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, mock-3.15.1, pydocstyle-2.4.0
collecting ... collected 53 items

tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/test_bccache.py::ISORT PASSED
tests/test_bccache.py::black PASSED
tests/test_bccache.py::test_bccache PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

tests/test_decorator.py::ISORT PASSED
tests/test_decorator.py::black PASSED
tests/test_decorator.py::test_decorator_cached_unless_authenticated PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

tests/test_decorator.py::test_decorator_cached_with_expiration PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=80::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=110::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=118::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=125::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager

tests/test_invenio_cache.py::ISORT PASSED
tests/test_invenio_cache.py::black PASSED
tests/test_invenio_cache.py::test_version PASSED
tests/test_invenio_cache.py::test_init PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

tests/test_invenio_cache.py::test_cache PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

tests/test_invenio_cache.py::test_current_cache PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

tests/test_invenio_cache.py::test_current_cache_ext PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

tests/test_invenio_cache.py::test_callback PASSED
tests/test_invenio_cache.py::test_callback_no_login PASSED
tests/test_locks.py::ISORT PASSED
tests/test_locks.py::black PASSED
tests/test_locks.py::test_cached_mutex PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/test_locks.py::test_cached_mutex_context PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/test_locks.py::test_cached_mutex_renew PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/test_locks.py::test_cache_failure PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

invenio_cache/__init__.py::PYDOCSTYLE PASSED
invenio_cache/__init__.py::ISORT PASSED
invenio_cache/__init__.py::black PASSED
invenio_cache/__init__.py::invenio_cache PASSED::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.

invenio_cache/_compat.py::PYDOCSTYLE PASSED
invenio_cache/_compat.py::ISORT PASSED
invenio_cache/_compat.py::black PASSED
invenio_cache/bccache.py::PYDOCSTYLE PASSED
invenio_cache/bccache.py::ISORT PASSED
invenio_cache/bccache.py::black PASSED
invenio_cache/config.py::PYDOCSTYLE PASSED
invenio_cache/config.py::ISORT PASSED
invenio_cache/config.py::black PASSED
invenio_cache/decorators.py::PYDOCSTYLE PASSED
invenio_cache/decorators.py::ISORT PASSED
invenio_cache/decorators.py::black PASSED
invenio_cache/errors.py::PYDOCSTYLE PASSED
invenio_cache/errors.py::ISORT PASSED
invenio_cache/errors.py::black PASSED
invenio_cache/ext.py::PYDOCSTYLE PASSED
invenio_cache/ext.py::ISORT PASSED
invenio_cache/ext.py::black PASSED
invenio_cache/lock.py::PYDOCSTYLE PASSED
invenio_cache/lock.py::ISORT PASSED
invenio_cache/lock.py::black PASSED
invenio_cache/proxies.py::PYDOCSTYLE PASSED
invenio_cache/proxies.py::ISORT PASSED
invenio_cache/proxies.py::black PASSED

=============================== warnings summary ===============================
tests/test_bccache.py: 1 warning
tests/test_decorator.py: 1 warning
tests/test_invenio_cache.py: 5 warnings
tests/test_locks.py: 4 warnings
invenio_cache/__init__.py: 1 warning
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py:145: DeprecationWarning: Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
    self._set_cache(app, config)

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:80: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:110: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:118: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid_with_entropy):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:125: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cache_failure
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py:55: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self._created = datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                          Stmts   Miss  Cover   Missing
-----------------------------------------------------------
invenio_cache/__init__.py         7      0   100%
invenio_cache/_compat.py          4      0   100%
invenio_cache/bccache.py          7      0   100%
invenio_cache/config.py           8      0   100%
invenio_cache/decorators.py      46      0   100%
invenio_cache/errors.py          14      1    93%   21
invenio_cache/ext.py             28      0   100%
invenio_cache/lock.py            70     11    84%   70, 80, 84, 88, 92, 157, 206, 214-219, 222
invenio_cache/proxies.py          7      0   100%
-----------------------------------------------------------
TOTAL                           191     12    94%
======================= 53 passed, 25 warnings in 3.66s ========================
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
