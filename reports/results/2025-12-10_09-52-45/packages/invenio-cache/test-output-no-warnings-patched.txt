 redis Pulling 
 redis Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-redis-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_cache
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, mock-3.15.1, pydocstyle-2.4.0
collecting ... collected 53 items

tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/test_bccache.py::ISORT PASSED
tests/test_bccache.py::black PASSED
tests/test_bccache.py::test_bccache PASSED

tests/test_decorator.py::ISORT PASSED
tests/test_decorator.py::black PASSED
tests/test_decorator.py::test_decorator_cached_unless_authenticated PASSED

tests/test_decorator.py::test_decorator_cached_with_expiration PASSED

tests/test_invenio_cache.py::ISORT PASSED
tests/test_invenio_cache.py::black PASSED
tests/test_invenio_cache.py::test_version PASSED
tests/test_invenio_cache.py::test_init PASSED

tests/test_invenio_cache.py::test_cache PASSED

tests/test_invenio_cache.py::test_current_cache PASSED

tests/test_invenio_cache.py::test_current_cache_ext PASSED

tests/test_invenio_cache.py::test_callback PASSED
tests/test_invenio_cache.py::test_callback_no_login PASSED
tests/test_locks.py::ISORT PASSED
tests/test_locks.py::black PASSED
tests/test_locks.py::test_cached_mutex PASSED

tests/test_locks.py::test_cached_mutex_context PASSED

tests/test_locks.py::test_cached_mutex_renew PASSED

tests/test_locks.py::test_cache_failure PASSED

invenio_cache/__init__.py::PYDOCSTYLE PASSED
invenio_cache/__init__.py::ISORT PASSED
invenio_cache/__init__.py::black PASSED
invenio_cache/__init__.py::invenio_cache PASSED

invenio_cache/_compat.py::PYDOCSTYLE PASSED
invenio_cache/_compat.py::ISORT PASSED
invenio_cache/_compat.py::black PASSED
invenio_cache/bccache.py::PYDOCSTYLE PASSED
invenio_cache/bccache.py::ISORT PASSED
invenio_cache/bccache.py::black PASSED
invenio_cache/config.py::PYDOCSTYLE PASSED
invenio_cache/config.py::ISORT PASSED
invenio_cache/config.py::black PASSED
invenio_cache/decorators.py::PYDOCSTYLE PASSED
invenio_cache/decorators.py::ISORT PASSED
invenio_cache/decorators.py::black PASSED
invenio_cache/errors.py::PYDOCSTYLE PASSED
invenio_cache/errors.py::ISORT PASSED
invenio_cache/errors.py::black PASSED
invenio_cache/ext.py::PYDOCSTYLE PASSED
invenio_cache/ext.py::ISORT PASSED
invenio_cache/ext.py::black PASSED
invenio_cache/lock.py::PYDOCSTYLE PASSED
invenio_cache/lock.py::ISORT PASSED
invenio_cache/lock.py::black PASSED
invenio_cache/proxies.py::PYDOCSTYLE PASSED
invenio_cache/proxies.py::ISORT PASSED
invenio_cache/proxies.py::black PASSED

=============================== warnings summary ===============================
    self._set_cache(app, config)

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:80: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:110: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:118: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid_with_entropy):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:125: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cache_failure
    self._created = datetime.utcnow()

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                          Stmts   Miss  Cover   Missing
invenio_cache/__init__.py         7      0   100%
invenio_cache/_compat.py          4      0   100%
invenio_cache/bccache.py          7      0   100%
invenio_cache/config.py           8      0   100%
invenio_cache/decorators.py      46      0   100%
invenio_cache/errors.py          14      1    93%   21
invenio_cache/ext.py             28      0   100%
invenio_cache/lock.py            70     11    84%   70, 80, 84, 88, 92, 157, 206, 214-219, 222
invenio_cache/proxies.py          7      0   100%
TOTAL                           191     12    94%
======================= 53 passed, 25 warnings in 3.66s ========================
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
