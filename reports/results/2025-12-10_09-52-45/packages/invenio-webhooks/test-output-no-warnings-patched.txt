 postgresql Pulling 
 redis Pulling 
 redis Pulled 
 postgresql Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-redis-1  Started
 Container docker_services_cli-postgresql-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: docs, tests, invenio_webhooks
plugins: github-actions-annotate-failures-0.3.0, black-0.6.0, pycodestyle-2.5.0, flask-1.3.0, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 63 items

docs/conf.py::PYDOCSTYLE PASSED
docs/conf.py::ISORT PASSED
docs/conf.py::black PASSED
tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/test_api.py::ISORT PASSED
tests/test_api.py::black PASSED
tests/test_api.py::test_405_methods PASSED

tests/test_api.py::test_webhook_post_unregistered PASSED

tests/test_api.py::test_webhook_post PASSED

tests/test_api.py::test_webhook_post_no_token PASSED

tests/test_api.py::test_405_methods_no_scope PASSED

tests/test_api.py::test_webhook_post_no_scope PASSED

tests/test_api.py::test_event_api PASSED

tests/test_invenio_webhooks.py::ISORT PASSED
tests/test_invenio_webhooks.py::black PASSED
tests/test_invenio_webhooks.py::test_version PASSED
tests/test_invenio_webhooks.py::test_init PASSED
tests/test_invenio_webhooks.py::test_alembic SKIPPED (caused by missing
key)
tests/test_invenio_webhooks.py::test_view PASSED
tests/test_receivers.py::ISORT PASSED
tests/test_receivers.py::black PASSED
tests/test_receivers.py::test_run_must_be_implemeted PASSED
tests/test_receivers.py::test_receiver_registration PASSED

tests/test_receivers.py::test_unknown_receiver PASSED
tests/test_receivers.py::test_hookurl PASSED
tests/test_receivers.py::test_signature_checking PASSED
tests/test_receivers.py::test_event_deletion PASSED
tests/test_receivers.py::test_event_status PASSED

invenio_webhooks/__init__.py::PYDOCSTYLE PASSED
invenio_webhooks/__init__.py::ISORT PASSED
invenio_webhooks/__init__.py::black PASSED
invenio_webhooks/_compat.py::PYDOCSTYLE PASSED
invenio_webhooks/_compat.py::ISORT PASSED
invenio_webhooks/_compat.py::black PASSED
invenio_webhooks/alembic/469925575192_create_webhooks_branch.py::PYDOCSTYLE PASSED
invenio_webhooks/alembic/469925575192_create_webhooks_branch.py::ISORT PASSED
invenio_webhooks/alembic/469925575192_create_webhooks_branch.py::black PASSED
invenio_webhooks/alembic/a095bd179f5c_create_webhooks_tables.py::PYDOCSTYLE PASSED
invenio_webhooks/alembic/a095bd179f5c_create_webhooks_tables.py::ISORT PASSED
invenio_webhooks/alembic/a095bd179f5c_create_webhooks_tables.py::black PASSED
invenio_webhooks/config.py::PYDOCSTYLE PASSED
invenio_webhooks/config.py::ISORT PASSED
invenio_webhooks/config.py::black PASSED
invenio_webhooks/errors.py::PYDOCSTYLE PASSED
invenio_webhooks/errors.py::ISORT PASSED
invenio_webhooks/errors.py::black PASSED
invenio_webhooks/ext.py::PYDOCSTYLE PASSED
invenio_webhooks/ext.py::ISORT PASSED
invenio_webhooks/ext.py::black PASSED
invenio_webhooks/models.py::PYDOCSTYLE PASSED
invenio_webhooks/models.py::ISORT PASSED
invenio_webhooks/models.py::black PASSED
invenio_webhooks/proxies.py::PYDOCSTYLE PASSED
invenio_webhooks/proxies.py::ISORT PASSED
invenio_webhooks/proxies.py::black PASSED
invenio_webhooks/signatures.py::PYDOCSTYLE PASSED
invenio_webhooks/signatures.py::ISORT PASSED
invenio_webhooks/signatures.py::black PASSED
invenio_webhooks/views.py::PYDOCSTYLE PASSED
invenio_webhooks/views.py::ISORT PASSED
invenio_webhooks/views.py::black PASSED

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
    from crypt import crypt as _crypt

tests/test_api.py::test_405_methods
    warnings.warn(

    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

tests/test_api.py::test_webhook_post_no_token
    warnings.warn(

tests/test_api.py::test_webhook_post_no_token
    _security.datetime_factory(),

tests/test_api.py::test_webhook_post_no_token
tests/test_api.py::test_event_api
tests/test_receivers.py::test_receiver_registration
tests/test_receivers.py::test_event_status
    target.updated = datetime.utcnow()

tests/test_api.py::test_webhook_post_no_token
    created = datetime.utcnow()

tests/test_api.py::test_webhook_post_no_token
tests/test_api.py::test_webhook_post_no_token
    return cls(int(id_s, 16), datetime.utcfromtimestamp(int(created_s, 16)))

tests/test_api.py::test_webhook_post_no_token
tests/test_api.py::test_webhook_post_no_token
    now = now or datetime.utcnow()

tests/test_receivers.py::test_receiver_registration
tests/test_receivers.py::test_event_status
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_webhooks/models.py:146: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    event = Event.query.get(event_id)

tests/test_receivers.py::test_event_status
    warnings.warn(

tests/test_receivers.py::test_event_status
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_receivers.py:221: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    event = Event.query.get(event_id)

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                              Stmts   Miss  Cover   Missing
invenio_webhooks/__init__.py                                          5      0   100%
invenio_webhooks/_compat.py                                           8      2    75%   46-47
invenio_webhooks/alembic/469925575192_create_webhooks_branch.py      10      2    80%   38, 43
invenio_webhooks/alembic/a095bd179f5c_create_webhooks_tables.py      16      6    62%   41-70, 80-81
invenio_webhooks/config.py                                            3      0   100%
invenio_webhooks/errors.py                                            4      0   100%
invenio_webhooks/ext.py                                              29      1    97%   56
invenio_webhooks/models.py                                          130      9    93%   195-196, 269-270, 275-276, 282-284
invenio_webhooks/proxies.py                                           3      0   100%
invenio_webhooks/signatures.py                                       12      0   100%
invenio_webhooks/views.py                                            88      7    92%   114, 141-145, 169
TOTAL                                                               308     27    91%
================= 62 passed, 1 skipped, 43 warnings in 10.36s ==================
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Container docker_services_cli-postgresql-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
