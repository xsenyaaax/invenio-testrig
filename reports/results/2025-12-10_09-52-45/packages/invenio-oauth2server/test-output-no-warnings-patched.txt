running extract_messages
extracting messages from invenio_oauth2server/__init__.py (encoding="utf-8")
extracting messages from invenio_oauth2server/admin.py (encoding="utf-8")
extracting messages from invenio_oauth2server/cli.py (encoding="utf-8")
extracting messages from invenio_oauth2server/config.py (encoding="utf-8")
extracting messages from invenio_oauth2server/decorators.py (encoding="utf-8")
extracting messages from invenio_oauth2server/errors.py (encoding="utf-8")
extracting messages from invenio_oauth2server/ext.py (encoding="utf-8")
extracting messages from invenio_oauth2server/forms.py (encoding="utf-8")
extracting messages from invenio_oauth2server/models.py (encoding="utf-8")
extracting messages from invenio_oauth2server/provider.py (encoding="utf-8")
extracting messages from invenio_oauth2server/proxies.py (encoding="utf-8")
extracting messages from invenio_oauth2server/scopes.py (encoding="utf-8")
extracting messages from invenio_oauth2server/utils.py (encoding="utf-8")
extracting messages from invenio_oauth2server/validators.py (encoding="utf-8")
extracting messages from invenio_oauth2server/alembic/12a88921ada2_create_oauth2server_tables.py (encoding="utf-8")
extracting messages from invenio_oauth2server/alembic/4e57407b8e4a_add_on_delete_cascade.py (encoding="utf-8")
extracting messages from invenio_oauth2server/alembic/aa546f2a8d2f_create_oauth2server_branch.py (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/authorize.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/base.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/errors.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/_macros.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/base.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/client_new.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/client_view.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/helpers.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/index.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/token_new.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/token_permission_view.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/invenio_oauth2server/settings/token_view.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/authorize.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/base.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/errors.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/_macros.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/base.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/client_new.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/client_view.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/helpers.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/index.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/token_new.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/token_permission_view.html (encoding="utf-8")
extracting messages from invenio_oauth2server/templates/semantic-ui/invenio_oauth2server/settings/token_view.html (encoding="utf-8")
extracting messages from invenio_oauth2server/theme/semantic/form_styling.py (encoding="utf-8")
extracting messages from invenio_oauth2server/views/__init__.py (encoding="utf-8")
extracting messages from invenio_oauth2server/views/server.py (encoding="utf-8")
extracting messages from invenio_oauth2server/views/settings.py (encoding="utf-8")
writing PO template file to /dev/null
 postgresql Pulling 
 postgresql Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-postgresql-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_oauth2server
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 152 items

tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/helpers.py::PYDOCSTYLE PASSED
tests/helpers.py::ISORT PASSED
tests/helpers.py::black PASSED
tests/test_admin.py::ISORT PASSED
tests/test_admin.py::black PASSED
tests/test_admin.py::test_admin PASSED

tests/test_alembic.py::ISORT PASSED
tests/test_alembic.py::black PASSED
tests/test_alembic.py::test_alembic SKIPPED (Caused by mergepoint)
tests/test_cli.py::ISORT PASSED
tests/test_cli.py::black PASSED
tests/test_cli.py::test_cli_tokens PASSED

tests/test_decorators.py::ISORT PASSED
tests/test_decorators.py::black PASSED
tests/test_decorators.py::test_require_api_auth_oauthlib_urldecode_issue PASSED

tests/test_decorators.py::test_require_api_auth_test1 PASSED

tests/test_decorators.py::test_require_api_auth_test2 PASSED

tests/test_decorators.py::test_require_oauth_scopes_test1 PASSED

tests/test_decorators.py::test_require_oauth_scopes_test2 PASSED

tests/test_decorators.py::test_require_oauth_scopes_allow_anonymous PASSED

tests/test_decorators.py::test_rest_extension PASSED

tests/test_decorators.py::test_access_login_required PASSED

tests/test_decorators.py::test_jwt_client PASSED

tests/test_invenio_oauth2server.py::ISORT PASSED
tests/test_invenio_oauth2server.py::black PASSED
tests/test_invenio_oauth2server.py::test_version PASSED
tests/test_invenio_oauth2server.py::test_init PASSED
tests/test_invenio_oauth2server.py::test_init_rest PASSED
tests/test_invenio_oauth2server.py::test_init_rest_with_oauthlib_monkeypatch PASSED
tests/test_models.py::ISORT PASSED
tests/test_models.py::black PASSED
tests/test_models.py::test_empty_redirect_uri_and_scope PASSED

tests/test_models.py::test_token_scopes PASSED

tests/test_models.py::test_registering_invalid_scope PASSED

tests/test_models.py::test_deletion_of_consumer_resource_owner PASSED

tests/test_models.py::test_deletion_of_resource_owner_consumer PASSED

tests/test_models.py::test_deletion_of_client1 PASSED

tests/test_models.py::test_deletion_of_token1 PASSED

tests/test_models.py::test_deletion_of_token2 PASSED

tests/test_provider.py::ISORT PASSED
tests/test_provider.py::black PASSED
tests/test_provider.py::test_client_salt PASSED

tests/test_provider.py::test_invalid_authorize_requests PASSED

tests/test_provider.py::test_refresh_flow PASSED

tests/test_provider.py::test_implicit_flow PASSED

tests/test_provider.py::test_client_flow PASSED

tests/test_provider.py::test_auth_flow_denied PASSED

tests/test_provider.py::test_personal_access_token PASSED

tests/test_provider.py::test_resource_auth_methods PASSED

tests/test_provider.py::test_oauthlib_urldecoding_issue[q=RegularArg-True] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[a=1&b=2&c=3-True] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[q=text+with+spaces-True] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[q=title:TheTitle-True] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[q=properly%20encoded%24-True] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[$type=search-False] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[q=Joan+D'Arc-False] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[with regular spaces-False] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[json_data={a: 42}-False] PASSED
tests/test_provider.py::test_oauthlib_urldecoding_issue[array=[1, 2, 3]-False] PASSED
tests/test_provider.py::test_oauthlib_monkeypatch PASSED

tests/test_provider.py::test_settings_index PASSED

tests/test_provider.py::test_info_not_accessible_in_production PASSED

tests/test_provider.py::test_expired_refresh_flow PASSED

tests/test_provider.py::test_not_allowed_public_refresh_flow PASSED

tests/test_provider.py::test_password_grant_type PASSED

tests/test_provider.py::test_email_scope PASSED

tests/test_server.py::ISORT PASSED
tests/test_server.py::black PASSED
tests/test_server.py::test_user_identity_init PASSED

tests/test_settings.py::ISORT PASSED
tests/test_settings.py::black PASSED
tests/test_settings.py::test_personal_token_management PASSED

tests/test_settings.py::test_authorized_app_revocation PASSED

tests/test_settings.py::test_client_management PASSED

tests/test_utils.py::ISORT PASSED
tests/test_utils.py::black PASSED
tests/test_utils.py::test_rebuilding_access_tokens PASSED

tests/test_validators.py::ISORT PASSED
tests/test_validators.py::black PASSED
tests/test_validators.py::test_validate_redirect_uri[example.org/-expected0] PASSED
tests/test_validators.py::test_validate_redirect_uri[http://-expected1] PASSED
tests/test_validators.py::test_validate_redirect_uri[http://example.org/-expected2] PASSED
tests/test_validators.py::test_validate_redirect_uri[https://example.org/-None] PASSED
tests/test_validators.py::test_validate_redirect_uri[https://localhost/-None] PASSED
tests/test_validators.py::test_validate_redirect_uri[https://127.0.0.1-None] PASSED
tests/test_validators.py::test_url_validator PASSED
invenio_oauth2server/__init__.py::PYDOCSTYLE PASSED
invenio_oauth2server/__init__.py::ISORT PASSED
invenio_oauth2server/__init__.py::black PASSED
invenio_oauth2server/admin.py::PYDOCSTYLE PASSED
invenio_oauth2server/admin.py::ISORT PASSED
invenio_oauth2server/admin.py::black PASSED
invenio_oauth2server/alembic/12a88921ada2_create_oauth2server_tables.py::PYDOCSTYLE PASSED
invenio_oauth2server/alembic/12a88921ada2_create_oauth2server_tables.py::ISORT PASSED
invenio_oauth2server/alembic/12a88921ada2_create_oauth2server_tables.py::black PASSED
invenio_oauth2server/alembic/4e57407b8e4a_add_on_delete_cascade.py::PYDOCSTYLE PASSED
invenio_oauth2server/alembic/4e57407b8e4a_add_on_delete_cascade.py::ISORT PASSED
invenio_oauth2server/alembic/4e57407b8e4a_add_on_delete_cascade.py::black PASSED
invenio_oauth2server/alembic/aa546f2a8d2f_create_oauth2server_branch.py::PYDOCSTYLE PASSED
invenio_oauth2server/alembic/aa546f2a8d2f_create_oauth2server_branch.py::ISORT PASSED
invenio_oauth2server/alembic/aa546f2a8d2f_create_oauth2server_branch.py::black PASSED
invenio_oauth2server/cli.py::PYDOCSTYLE PASSED
invenio_oauth2server/cli.py::ISORT PASSED
invenio_oauth2server/cli.py::black PASSED
invenio_oauth2server/config.py::PYDOCSTYLE PASSED
invenio_oauth2server/config.py::ISORT PASSED
invenio_oauth2server/config.py::black PASSED
invenio_oauth2server/decorators.py::PYDOCSTYLE PASSED
invenio_oauth2server/decorators.py::ISORT PASSED
invenio_oauth2server/decorators.py::black PASSED
invenio_oauth2server/errors.py::PYDOCSTYLE PASSED
invenio_oauth2server/errors.py::ISORT PASSED
invenio_oauth2server/errors.py::black PASSED
invenio_oauth2server/ext.py::PYDOCSTYLE PASSED
invenio_oauth2server/ext.py::ISORT PASSED
invenio_oauth2server/ext.py::black PASSED
invenio_oauth2server/forms.py::PYDOCSTYLE PASSED
invenio_oauth2server/forms.py::ISORT PASSED
invenio_oauth2server/forms.py::black PASSED
invenio_oauth2server/models.py::PYDOCSTYLE PASSED
invenio_oauth2server/models.py::ISORT PASSED
invenio_oauth2server/models.py::black PASSED
invenio_oauth2server/provider.py::PYDOCSTYLE PASSED
invenio_oauth2server/provider.py::ISORT PASSED
invenio_oauth2server/provider.py::black PASSED
invenio_oauth2server/proxies.py::PYDOCSTYLE PASSED
invenio_oauth2server/proxies.py::ISORT PASSED
invenio_oauth2server/proxies.py::black PASSED
invenio_oauth2server/scopes.py::PYDOCSTYLE PASSED
invenio_oauth2server/scopes.py::ISORT PASSED
invenio_oauth2server/scopes.py::black PASSED
invenio_oauth2server/theme/semantic/form_styling.py::PYDOCSTYLE PASSED
invenio_oauth2server/theme/semantic/form_styling.py::ISORT PASSED
invenio_oauth2server/theme/semantic/form_styling.py::black PASSED
invenio_oauth2server/utils.py::PYDOCSTYLE PASSED
invenio_oauth2server/utils.py::ISORT PASSED
invenio_oauth2server/utils.py::black PASSED
invenio_oauth2server/validators.py::PYDOCSTYLE PASSED
invenio_oauth2server/validators.py::ISORT PASSED
invenio_oauth2server/validators.py::black PASSED
invenio_oauth2server/views/__init__.py::PYDOCSTYLE PASSED
invenio_oauth2server/views/__init__.py::ISORT PASSED
invenio_oauth2server/views/__init__.py::black PASSED
invenio_oauth2server/views/server.py::PYDOCSTYLE PASSED
invenio_oauth2server/views/server.py::ISORT PASSED
invenio_oauth2server/views/server.py::black PASSED
invenio_oauth2server/views/settings.py::PYDOCSTYLE PASSED
invenio_oauth2server/views/settings.py::ISORT PASSED
invenio_oauth2server/views/settings.py::black PASSED

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
    from crypt import crypt as _crypt

tests/test_admin.py::test_admin
tests/test_models.py::test_empty_redirect_uri_and_scope
tests/test_provider.py::test_oauthlib_monkeypatch
tests/test_provider.py::test_settings_index
    warnings.warn(

    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

    created = datetime.utcnow()

    return cls(int(id_s, 16), datetime.utcfromtimestamp(int(created_s, 16)))

    now = now or datetime.utcnow()

    _security.datetime_factory(),

    target.updated = datetime.utcnow()

tests/test_decorators.py::test_jwt_client
tests/test_decorators.py::test_jwt_client
tests/test_decorators.py::test_jwt_client
tests/test_decorators.py::test_jwt_client
tests/test_decorators.py::test_jwt_client
    now = datetime.utcnow()

tests/test_models.py::test_empty_redirect_uri_and_scope
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_models.py:34: SAWarning: Object of type <Client> not in session, add operation along 'User.oauth2clients' will not proceed
    with db.session.begin_nested():

tests/test_models.py::test_token_scopes
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/conftest.py:271: SAWarning: Object of type <Client> not in session, add operation along 'User.oauth2clients' will not proceed (This warning originated from the Session 'autoflush' process, which was invoked automatically in response to a user-initiated operation. Consider using ``no_autoflush`` context manager if this warning happened while initializing objects.)
    app.test_user = lambda: db.session.get(User, test_user_id)

tests/test_models.py::test_token_scopes
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_models.py:80: SAWarning: Object of type <Token> not in session, add operation along 'User.oauth2tokens' will not proceed
    with db.session.begin_nested():

    warnings.warn(

    expires = datetime.utcnow() + timedelta(seconds=int(expires_in))

    datetime.datetime.utcnow() > tok.expires:

tests/test_provider.py::test_auth_flow_denied
    log.warn(

tests/test_provider.py::test_expired_refresh_flow
    dict(expires=datetime.utcnow() - timedelta(seconds=1))

tests/test_provider.py::test_not_allowed_public_refresh_flow
    dict(expires=datetime.utcnow() - timedelta(seconds=1))

tests/test_settings.py::test_authorized_app_revocation
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_security/datastore.py:219: SAWarning: Object of type <Client> not in session, add operation along 'User.oauth2clients' will not proceed (This warning originated from the Session 'autoflush' process, which was invoked automatically in response to a user-initiated operation. Consider using ``no_autoflush`` context manager if this warning happened while initializing objects.)
    rv = self.user_model.query.filter(query).first()

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                                      Stmts   Miss  Cover   Missing
invenio_oauth2server/__init__.py                                              5      0   100%
invenio_oauth2server/admin.py                                                23      0   100%
invenio_oauth2server/alembic/4e57407b8e4a_add_on_delete_cascade.py           25     18    28%   22-73, 83-121
invenio_oauth2server/alembic/12a88921ada2_create_oauth2server_tables.py      19     10    47%   25-82, 93-101
invenio_oauth2server/alembic/aa546f2a8d2f_create_oauth2server_branch.py       8      2    75%   21, 26
invenio_oauth2server/cli.py                                                  56      6    89%   39, 81, 93-97
invenio_oauth2server/config.py                                               22      0   100%
invenio_oauth2server/decorators.py                                           33      0   100%
invenio_oauth2server/errors.py                                               38      2    95%   41, 59
invenio_oauth2server/ext.py                                                 132     10    92%   48-50, 106-107, 192, 194, 233, 236, 343-345
invenio_oauth2server/forms.py                                                58      1    98%   51
invenio_oauth2server/models.py                                              170      5    97%   75, 80, 206-208
invenio_oauth2server/provider.py                                             58      2    97%   153-155
invenio_oauth2server/proxies.py                                               4      0   100%
invenio_oauth2server/scopes.py                                                4      0   100%
invenio_oauth2server/theme/semantic/form_styling.py                          20     14    30%   19, 23-40, 45
invenio_oauth2server/utils.py                                                30      1    97%   68
invenio_oauth2server/validators.py                                           26      0   100%
invenio_oauth2server/views/__init__.py                                        3      0   100%
invenio_oauth2server/views/server.py                                         69      9    87%   46-53, 71, 97, 153-157
invenio_oauth2server/views/settings.py                                      117      6    95%   42, 70, 203, 233, 268-269
TOTAL                                                                       920     86    91%
================ 151 passed, 1 skipped, 515 warnings in 37.82s =================
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
