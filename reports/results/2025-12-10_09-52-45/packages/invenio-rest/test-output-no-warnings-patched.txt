============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_rest
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 73 items

tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/test_csrf.py::ISORT PASSED
tests/test_csrf.py::black PASSED
tests/test_csrf.py::test_csrf_init PASSED
tests/test_csrf.py::test_csrf_disabled PASSED

tests/test_csrf.py::test_csrf_enabled PASSED

tests/test_csrf.py::test_csrf_before_csrf_protect PASSED

tests/test_csrf.py::test_csrf_exempt PASSED

tests/test_csrf.py::test_csrf_exempt_dec PASSED

tests/test_csrf.py::test_csrf_exempt_bp PASSED

tests/test_csrf.py::test_skip_csrf_check PASSED

tests/test_csrf.py::test_csrf_not_signed_correctly PASSED

tests/test_csrf.py::test_csrf_token_rotation PASSED

tests/test_csrf.py::test_csrf_no_referer PASSED

tests/test_csrf.py::test_csrf_malformed_referer PASSED

tests/test_csrf.py::test_csrf_insecure_referer PASSED

tests/test_csrf.py::test_csrf_bad_referer PASSED

tests/test_decorators.py::ISORT PASSED
tests/test_decorators.py::black PASSED
tests/test_decorators.py::test_require_content_types PASSED

tests/test_errors.py::ISORT PASSED
tests/test_errors.py::black PASSED
tests/test_errors.py::test_errors {'status': 400, 'message': 'Validation error.', 'errors': [{'field': 'myfield', 'message': 'mymessage', 'code': 10}]}
PASSED

tests/test_invenio_rest.py::ISORT PASSED
tests/test_invenio_rest.py::black PASSED
tests/test_invenio_rest.py::test_version PASSED
tests/test_invenio_rest.py::test_init PASSED

tests/test_invenio_rest.py::test_error_handlers PASSED

tests/test_invenio_rest.py::test_custom_httpexception PASSED

tests/test_invenio_rest.py::test_cors PASSED

tests/test_invenio_rest.py::test_content_negotiation_method_view_global_serializers PASSED

tests/test_invenio_rest.py::test_content_negotiation_method_view_method_serializers PASSED

tests/test_invenio_rest.py::test_content_negotiation_method_view_method_serializers_2 PASSED

tests/test_invenio_rest.py::test_content_negotiation_method_view_mixed_serializers PASSED

tests/test_invenio_rest.py::test_default_media_type PASSED

tests/test_invenio_rest.py::test_default_media_type_for_all_methods PASSED

tests/test_invenio_rest.py::test_default_method_media_type PASSED

tests/test_invenio_rest.py::test_default_method_media_type_error PASSED
tests/test_invenio_rest.py::test_default_media_type_error PASSED
tests/test_invenio_rest.py::test_get_method_serializers PASSED
tests/test_invenio_rest.py::test_match_serializers_headers PASSED
tests/test_invenio_rest.py::test_match_serializers_query_arg PASSED

tests/test_serializer.py::ISORT PASSED
tests/test_serializer.py::black PASSED
tests/test_serializer.py::test_serialize_pretty PASSED

tests/test_serializer.py::test_marshmallow_compatibility PASSED

invenio_rest/__init__.py::PYDOCSTYLE PASSED
invenio_rest/__init__.py::ISORT PASSED
invenio_rest/__init__.py::black PASSED
invenio_rest/__init__.py::invenio_rest PASSED

invenio_rest/config.py::PYDOCSTYLE PASSED
invenio_rest/config.py::ISORT PASSED
invenio_rest/config.py::black PASSED
invenio_rest/csrf.py::PYDOCSTYLE PASSED
invenio_rest/csrf.py::ISORT PASSED
invenio_rest/csrf.py::black PASSED
invenio_rest/decorators.py::PYDOCSTYLE PASSED
invenio_rest/decorators.py::ISORT PASSED
invenio_rest/decorators.py::black PASSED
invenio_rest/errors.py::PYDOCSTYLE PASSED
invenio_rest/errors.py::ISORT PASSED
invenio_rest/errors.py::black PASSED
invenio_rest/ext.py::PYDOCSTYLE PASSED
invenio_rest/ext.py::ISORT PASSED
invenio_rest/ext.py::black PASSED
invenio_rest/serializer.py::PYDOCSTYLE PASSED
invenio_rest/serializer.py::ISORT PASSED
invenio_rest/serializer.py::black PASSED
invenio_rest/views.py::PYDOCSTYLE PASSED
invenio_rest/views.py::ISORT PASSED
invenio_rest/views.py::black PASSED

=============================== warnings summary ===============================
    self.init_app(app)

tests/test_invenio_rest.py::test_init
    ext.init_app(app)

    self.modified = datetime.utcnow()

tests/test_serializer.py::test_serialize_pretty
    assert (TestSchema().dump(data)).data == {"title": "test"}

tests/test_serializer.py::test_marshmallow_compatibility
    assert wrapped.data == dict_result

tests/test_serializer.py::test_marshmallow_compatibility
    assert wrapped.data == list_result

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                         Stmts   Miss  Cover   Missing
invenio_rest/__init__.py         6      0   100%
invenio_rest/config.py          13      0   100%
invenio_rest/csrf.py           146      7    95%   74-75, 149, 180, 196-197, 270
invenio_rest/decorators.py      13      0   100%
invenio_rest/errors.py          66      1    98%   81
invenio_rest/ext.py             40      2    95%   49-51
invenio_rest/serializer.py      37      7    81%   64, 77-78, 82-83, 87-88
invenio_rest/views.py          110      6    95%   44, 48-50, 170-171
TOTAL                          431     23    95%
======================= 73 passed, 627 warnings in 4.96s =======================
