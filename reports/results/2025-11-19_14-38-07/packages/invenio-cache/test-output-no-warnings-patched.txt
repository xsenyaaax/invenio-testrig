 redis Pulling 
 redis Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-redis-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_cache
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, mock-3.15.1, pydocstyle-2.4.0
collected 53 items

tests/conftest.py ...                                                    [  5%]
tests/test_bccache.py ...
                                                [ 11%]
tests/test_decorator.py ...
.
                                             [ 18%]
tests/test_invenio_cache.py ....
.
.
.
..                                    [ 35%]
tests/test_locks.py ...
.
.
.
                                               [ 47%]
invenio_cache/__init__.py ....
                                           [ 54%]
invenio_cache/_compat.py ...                                             [ 60%]
invenio_cache/bccache.py ...                                             [ 66%]
invenio_cache/config.py ...                                              [ 71%]
invenio_cache/decorators.py ...                                          [ 77%]
invenio_cache/errors.py ...                                              [ 83%]
invenio_cache/ext.py ...                                                 [ 88%]
invenio_cache/lock.py ...                                                [ 94%]
invenio_cache/proxies.py ...                                             [100%]

=============================== warnings summary ===============================
    self._set_cache(app, config)

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:80: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:110: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:118: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid_with_entropy):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:125: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cache_failure
    self._created = datetime.utcnow()

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                          Stmts   Miss  Cover   Missing
invenio_cache/__init__.py         7      0   100%
invenio_cache/_compat.py          4      0   100%
invenio_cache/bccache.py          7      0   100%
invenio_cache/config.py           8      0   100%
invenio_cache/decorators.py      46      0   100%
invenio_cache/errors.py          14      1    93%   21
invenio_cache/ext.py             28      0   100%
invenio_cache/lock.py            70     11    84%   70, 80, 84, 88, 92, 157, 206, 214-219, 222
invenio_cache/proxies.py          7      0   100%
TOTAL                           191     12    94%
======================= 53 passed, 25 warnings in 3.75s ========================
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
