 redis Pulling 
 elasticsearch Pulling 
 postgresql Pulling 
 rabbitmq Pulling 
 redis Pulled 
 rabbitmq Pulled 
 postgresql Pulled 
 elasticsearch Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-rabbitmq-1  Creating
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-elasticsearch-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-elasticsearch-1  Created
 Container docker_services_cli-rabbitmq-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-rabbitmq-1  Starting
 Container docker_services_cli-elasticsearch-1  Starting
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-redis-1  Started
 Container docker_services_cli-postgresql-1  Started
 Container docker_services_cli-rabbitmq-1  Started
 Container docker_services_cli-elasticsearch-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: docs, tests, invenio_jobs
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 174 items

docs/conf.py::PYDOCSTYLE PASSED
docs/conf.py::ISORT PASSED
docs/conf.py::black PASSED
tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/mock_module/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/__init__.py::ISORT PASSED
tests/mock_module/__init__.py::black PASSED
tests/mock_module/jobs.py::PYDOCSTYLE PASSED
tests/mock_module/jobs.py::ISORT PASSED
tests/mock_module/jobs.py::black PASSED
tests/mock_module/tasks.py::PYDOCSTYLE PASSED
tests/mock_module/tasks.py::ISORT PASSED
tests/mock_module/tasks.py::black PASSED
tests/resources/test_resources.py::ISORT PASSED
tests/resources/test_resources.py::black PASSED
tests/resources/test_resources.py::test_simple_flow JSONSCHEMAS_HOST is set to localhost
Flask-DebugToolbar extension not installed.
A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
           ^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/resources/resources.py", line 188, in create
    item = self.service.create(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/logging/jobs.py", line 82, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/services/services.py", line 259, in create
    valid_data, errors = self.schema.load(
                         ^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py", line 90, in load
    valid_data = self.schema(context=context, **schema_args).load(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/schema.py", line 792, in load
    return self._do_load(
           ^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/schema.py", line 999, in _do_load
    raise exc
marshmallow.exceptions.ValidationError: {'args': {'since': ['Not a valid datetime.']}}
[2025-12-10 10:54:51,281] DEBUG in errors: A resource error handler caught the following exception:
Traceback (most recent call last):
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/resources.py", line 65, in view
    return view_meth()
           ^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/content_negotiation.py", line 116, in inner_content_negotiation
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/parsers/decorators.py", line 90, in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/parsers/decorators.py", line 51, in inner
    return f(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/responses.py", line 39, in inner
    res = f(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/resources/resources.py", line 188, in create
    item = self.service.create(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/logging/jobs.py", line 82, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py", line 251, in inner
    res = f(self, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/services/services.py", line 259, in create
    valid_data, errors = self.schema.load(
                         ^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py", line 90, in load
    valid_data = self.schema(context=context, **schema_args).load(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/schema.py", line 792, in load
    return self._do_load(
           ^^^^^^^^^^^^^^
  File "/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/schema.py", line 999, in _do_load
    raise exc
marshmallow.exceptions.ValidationError: {'args': {'since': ['Not a valid datetime.']}}
Run created
[2025-12-10 10:54:51,310] DEBUG in services: Run created
Run created
[2025-12-10 10:54:51,437] DEBUG in services: Run created
Test log message
[2025-12-10 10:54:51,731] INFO in test_resources: Test log message
PASSED
tests/resources/test_resources.py::test_tasks_search SKIPPED (Tasks
search not needed.)
tests/resources/test_resources.py::test_jobs_create PASSED

tests/resources/test_resources.py::test_jobs_update PASSED

tests/resources/test_resources.py::test_jobs_search PASSED

tests/resources/test_resources.py::test_jobs_delete PASSED

tests/resources/test_resources.py::test_job_template_args SKIPPED
tests/test_alembic.py::ISORT PASSED
tests/test_alembic.py::black PASSED
tests/test_alembic.py::test_alembic SKIPPED (endles loop)
tests/test_deprecated.py::ISORT PASSED
tests/test_deprecated.py::black PASSED
tests/test_deprecated.py::test_task_execution_error_deprecated PASSED
tests/test_invenio_jobs.py::ISORT PASSED
tests/test_invenio_jobs.py::black PASSED
tests/test_invenio_jobs.py::test_version PASSED
tests/test_invenio_jobs.py::test_init PASSED
tests/test_services_job_logs.py::ISORT PASSED
tests/test_services_job_logs.py::black PASSED
tests/test_services_job_logs.py::test_job_logs_search_limits_to_max_docs JSONSCHEMAS_HOST is set to localhost
[2025-12-10 10:54:54,810] WARNING in ext: JSONSCHEMAS_HOST is set to localhost
JSONSCHEMAS_HOST is set to localhost
Flask-DebugToolbar extension not installed.
[2025-12-10 10:54:55,004] DEBUG in ext: Flask-DebugToolbar extension not installed.
Flask-DebugToolbar extension not installed.
PASSED

tests/test_services_job_logs.py::test_job_logs_search_returns_all_when_under_limit PASSED

tests/test_services_subtasks.py::ISORT PASSED
tests/test_services_subtasks.py::black PASSED
tests/test_services_subtasks.py::test_create_subtask_run JSONSCHEMAS_HOST is set to localhost
[2025-12-10 10:54:56,733] WARNING in ext: JSONSCHEMAS_HOST is set to localhost
JSONSCHEMAS_HOST is set to localhost
JSONSCHEMAS_HOST is set to localhost
Flask-DebugToolbar extension not installed.
[2025-12-10 10:54:56,926] DEBUG in ext: Flask-DebugToolbar extension not installed.
Flask-DebugToolbar extension not installed.
Flask-DebugToolbar extension not installed.
Run created
[2025-12-10 10:54:58,082] DEBUG in services: Run created
Run created
Run created
Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:58,099] INFO in tasks: Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.QUEUED and active subtasks: False
Executing run ae670a36-7c9b-4aff-ac31-bf1172920328 with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:58,112] DEBUG in tasks: Executing run ae670a36-7c9b-4aff-ac31-bf1172920328 with task mock_module.tasks.mock_task and args None
Executing run ae670a36-7c9b-4aff-ac31-bf1172920328 with task mock_module.tasks.mock_task and args None
Executing run ae670a36-7c9b-4aff-ac31-bf1172920328 with task mock_module.tasks.mock_task and args None
Run ae670a36-7c9b-4aff-ac31-bf1172920328 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:58,120] ERROR in tasks: Run ae670a36-7c9b-4aff-ac31-bf1172920328 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run ae670a36-7c9b-4aff-ac31-bf1172920328 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run ae670a36-7c9b-4aff-ac31-bf1172920328 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:58,122] INFO in tasks: Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run ae670a36-7c9b-4aff-ac31-bf1172920328 with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_create_subtask_run_invalid_parent PASSED

tests/test_services_subtasks.py::test_start_processing_subtask Run created
[2025-12-10 10:54:58,430] DEBUG in services: Run created
Run created
Run created
Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:58,437] INFO in tasks: Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.QUEUED and active subtasks: False
Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.QUEUED and active subtasks: False
Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.QUEUED and active subtasks: False
Executing run b665da42-762e-4cad-bb30-dfc2902ab42d with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:58,447] DEBUG in tasks: Executing run b665da42-762e-4cad-bb30-dfc2902ab42d with task mock_module.tasks.mock_task and args None
Executing run b665da42-762e-4cad-bb30-dfc2902ab42d with task mock_module.tasks.mock_task and args None
Executing run b665da42-762e-4cad-bb30-dfc2902ab42d with task mock_module.tasks.mock_task and args None
Run b665da42-762e-4cad-bb30-dfc2902ab42d encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:58,455] ERROR in tasks: Run b665da42-762e-4cad-bb30-dfc2902ab42d encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run b665da42-762e-4cad-bb30-dfc2902ab42d encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run b665da42-762e-4cad-bb30-dfc2902ab42d encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:58,458] INFO in tasks: Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.RUNNING and active subtasks: False
Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.RUNNING and active subtasks: False
Updating run b665da42-762e-4cad-bb30-dfc2902ab42d with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_start_processing_subtask_invalid_status Run created
[2025-12-10 10:54:58,683] DEBUG in services: Run created
Run created
Run created
Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:58,690] INFO in tasks: Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.QUEUED and active subtasks: False
Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.QUEUED and active subtasks: False
Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.QUEUED and active subtasks: False
Executing run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:58,698] DEBUG in tasks: Executing run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with task mock_module.tasks.mock_task and args None
Executing run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with task mock_module.tasks.mock_task and args None
Executing run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with task mock_module.tasks.mock_task and args None
Run af8c27e6-4395-47ff-ac0a-ce1ae73277ed encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:58,705] ERROR in tasks: Run af8c27e6-4395-47ff-ac0a-ce1ae73277ed encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run af8c27e6-4395-47ff-ac0a-ce1ae73277ed encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run af8c27e6-4395-47ff-ac0a-ce1ae73277ed encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:58,708] INFO in tasks: Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.RUNNING and active subtasks: False
Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.RUNNING and active subtasks: False
Updating run af8c27e6-4395-47ff-ac0a-ce1ae73277ed with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_finalize_subtask_success Run created
[2025-12-10 10:54:58,842] DEBUG in services: Run created
Run created
Run created
Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:58,848] INFO in tasks: Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.QUEUED and active subtasks: False
Executing run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:58,857] DEBUG in tasks: Executing run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with task mock_module.tasks.mock_task and args None
Executing run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with task mock_module.tasks.mock_task and args None
Executing run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with task mock_module.tasks.mock_task and args None
Run 96ebda78-8be2-42df-b9ae-ccef0ac72636 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:58,864] ERROR in tasks: Run 96ebda78-8be2-42df-b9ae-ccef0ac72636 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 96ebda78-8be2-42df-b9ae-ccef0ac72636 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 96ebda78-8be2-42df-b9ae-ccef0ac72636 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:58,867] INFO in tasks: Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 96ebda78-8be2-42df-b9ae-ccef0ac72636 with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_finalize_subtask_failure Run created
[2025-12-10 10:54:59,111] DEBUG in services: Run created
Run created
Run created
Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:59,118] INFO in tasks: Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.QUEUED and active subtasks: False
Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.QUEUED and active subtasks: False
Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.QUEUED and active subtasks: False
Executing run f78b1cae-319a-47c0-b693-9cc4a40de25f with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:59,130] DEBUG in tasks: Executing run f78b1cae-319a-47c0-b693-9cc4a40de25f with task mock_module.tasks.mock_task and args None
Executing run f78b1cae-319a-47c0-b693-9cc4a40de25f with task mock_module.tasks.mock_task and args None
Executing run f78b1cae-319a-47c0-b693-9cc4a40de25f with task mock_module.tasks.mock_task and args None
Run f78b1cae-319a-47c0-b693-9cc4a40de25f encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:59,136] ERROR in tasks: Run f78b1cae-319a-47c0-b693-9cc4a40de25f encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run f78b1cae-319a-47c0-b693-9cc4a40de25f encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run f78b1cae-319a-47c0-b693-9cc4a40de25f encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:59,138] INFO in tasks: Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.RUNNING and active subtasks: False
Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.RUNNING and active subtasks: False
Updating run f78b1cae-319a-47c0-b693-9cc4a40de25f with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_finalize_subtask_partial_success Run created
[2025-12-10 10:54:59,385] DEBUG in services: Run created
Run created
Run created
Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:59,392] INFO in tasks: Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.QUEUED and active subtasks: False
Executing run 12c8344e-578a-456e-88fe-c2cf0c42c41e with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:59,407] DEBUG in tasks: Executing run 12c8344e-578a-456e-88fe-c2cf0c42c41e with task mock_module.tasks.mock_task and args None
Executing run 12c8344e-578a-456e-88fe-c2cf0c42c41e with task mock_module.tasks.mock_task and args None
Executing run 12c8344e-578a-456e-88fe-c2cf0c42c41e with task mock_module.tasks.mock_task and args None
Run 12c8344e-578a-456e-88fe-c2cf0c42c41e encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:59,413] ERROR in tasks: Run 12c8344e-578a-456e-88fe-c2cf0c42c41e encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 12c8344e-578a-456e-88fe-c2cf0c42c41e encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 12c8344e-578a-456e-88fe-c2cf0c42c41e encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:59,416] INFO in tasks: Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 12c8344e-578a-456e-88fe-c2cf0c42c41e with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_add_total_entries Run created
[2025-12-10 10:54:59,639] DEBUG in services: Run created
Run created
Run created
Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:59,646] INFO in tasks: Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.QUEUED and active subtasks: False
Executing run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:59,654] DEBUG in tasks: Executing run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with task mock_module.tasks.mock_task and args None
Executing run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with task mock_module.tasks.mock_task and args None
Executing run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with task mock_module.tasks.mock_task and args None
Run 7a85c3a9-4e29-4996-9e18-2513b30b0918 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:59,662] ERROR in tasks: Run 7a85c3a9-4e29-4996-9e18-2513b30b0918 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 7a85c3a9-4e29-4996-9e18-2513b30b0918 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 7a85c3a9-4e29-4996-9e18-2513b30b0918 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:59,665] INFO in tasks: Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 7a85c3a9-4e29-4996-9e18-2513b30b0918 with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_add_total_entries_invalid_values Run created
[2025-12-10 10:54:59,870] DEBUG in services: Run created
Run created
Run created
Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:54:59,877] INFO in tasks: Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.QUEUED and active subtasks: False
Executing run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with task mock_module.tasks.mock_task and args None
[2025-12-10 10:54:59,887] DEBUG in tasks: Executing run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with task mock_module.tasks.mock_task and args None
Executing run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with task mock_module.tasks.mock_task and args None
Executing run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with task mock_module.tasks.mock_task and args None
Run 19a5632b-faaf-4f0c-9c90-3bc632e42474 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:54:59,894] ERROR in tasks: Run 19a5632b-faaf-4f0c-9c90-3bc632e42474 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 19a5632b-faaf-4f0c-9c90-3bc632e42474 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 19a5632b-faaf-4f0c-9c90-3bc632e42474 encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:54:59,897] INFO in tasks: Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 19a5632b-faaf-4f0c-9c90-3bc632e42474 with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_finalize_subtask_with_errored_entries_message Run created
[2025-12-10 10:55:00,014] DEBUG in services: Run created
Run created
Run created
Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.QUEUED and active subtasks: False
[2025-12-10 10:55:00,020] INFO in tasks: Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.QUEUED and active subtasks: False
Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.QUEUED and active subtasks: False
Executing run 795280a7-0fb8-41e8-9995-de0eecc9b3de with task mock_module.tasks.mock_task and args None
[2025-12-10 10:55:00,029] DEBUG in tasks: Executing run 795280a7-0fb8-41e8-9995-de0eecc9b3de with task mock_module.tasks.mock_task and args None
Executing run 795280a7-0fb8-41e8-9995-de0eecc9b3de with task mock_module.tasks.mock_task and args None
Executing run 795280a7-0fb8-41e8-9995-de0eecc9b3de with task mock_module.tasks.mock_task and args None
Run 795280a7-0fb8-41e8-9995-de0eecc9b3de encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
[2025-12-10 10:55:00,035] ERROR in tasks: Run 795280a7-0fb8-41e8-9995-de0eecc9b3de encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 795280a7-0fb8-41e8-9995-de0eecc9b3de encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Run 795280a7-0fb8-41e8-9995-de0eecc9b3de encountered an unexpected error: mock_task() got an unexpected keyword argument 'since'
Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.RUNNING and active subtasks: False
[2025-12-10 10:55:00,038] INFO in tasks: Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.RUNNING and active subtasks: False
Updating run 795280a7-0fb8-41e8-9995-de0eecc9b3de with status RunStatusEnum.RUNNING and active subtasks: False
PASSED

tests/test_services_subtasks.py::test_finalize_subtask_nonexistent_run PASSED

tests/test_utils.py::ISORT PASSED
tests/test_utils.py::black PASSED
tests/test_utils.py::test_job_arg_json_dumper PASSED
invenio_jobs/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/__init__.py::ISORT PASSED
invenio_jobs/__init__.py::black PASSED
invenio_jobs/administration/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/administration/__init__.py::ISORT PASSED
invenio_jobs/administration/__init__.py::black PASSED
invenio_jobs/administration/jobs.py::PYDOCSTYLE PASSED
invenio_jobs/administration/jobs.py::ISORT PASSED
invenio_jobs/administration/jobs.py::black PASSED
invenio_jobs/administration/runs.py::PYDOCSTYLE PASSED
invenio_jobs/administration/runs.py::ISORT PASSED
invenio_jobs/administration/runs.py::black PASSED
invenio_jobs/alembic/1753948224_add_subtasks_columns_to_jobs_run.py::PYDOCSTYLE PASSED
invenio_jobs/alembic/1753948224_add_subtasks_columns_to_jobs_run.py::ISORT PASSED
invenio_jobs/alembic/1753948224_add_subtasks_columns_to_jobs_run.py::black PASSED
invenio_jobs/alembic/1f896f6990b8_update_jobs_module_table_names.py::PYDOCSTYLE PASSED
invenio_jobs/alembic/1f896f6990b8_update_jobs_module_table_names.py::ISORT PASSED
invenio_jobs/alembic/1f896f6990b8_update_jobs_module_table_names.py::black PASSED
invenio_jobs/alembic/356496a01197_create_invenio_jobs_tables.py::PYDOCSTYLE PASSED
invenio_jobs/alembic/356496a01197_create_invenio_jobs_tables.py::ISORT PASSED
invenio_jobs/alembic/356496a01197_create_invenio_jobs_tables.py::black PASSED
invenio_jobs/alembic/371f4cbcb73d_create_invenio_jobs_branch.py::PYDOCSTYLE PASSED
invenio_jobs/alembic/371f4cbcb73d_create_invenio_jobs_branch.py::ISORT PASSED
invenio_jobs/alembic/371f4cbcb73d_create_invenio_jobs_branch.py::black PASSED
invenio_jobs/api.py::PYDOCSTYLE PASSED
invenio_jobs/api.py::ISORT PASSED
invenio_jobs/api.py::black PASSED
invenio_jobs/config.py::PYDOCSTYLE PASSED
invenio_jobs/config.py::ISORT PASSED
invenio_jobs/config.py::black PASSED
invenio_jobs/errors.py::PYDOCSTYLE PASSED
invenio_jobs/errors.py::ISORT PASSED
invenio_jobs/errors.py::black PASSED
invenio_jobs/ext.py::PYDOCSTYLE PASSED
invenio_jobs/ext.py::ISORT PASSED
invenio_jobs/ext.py::black PASSED
invenio_jobs/jobs.py::PYDOCSTYLE PASSED
invenio_jobs/jobs.py::ISORT PASSED
invenio_jobs/jobs.py::black PASSED
invenio_jobs/logging/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/logging/__init__.py::ISORT PASSED
invenio_jobs/logging/__init__.py::black PASSED
invenio_jobs/logging/celery_signals.py::PYDOCSTYLE PASSED
invenio_jobs/logging/celery_signals.py::ISORT PASSED
invenio_jobs/logging/celery_signals.py::black PASSED
invenio_jobs/logging/index_templates/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/logging/index_templates/__init__.py::ISORT PASSED
invenio_jobs/logging/index_templates/__init__.py::black PASSED
invenio_jobs/logging/index_templates/os-v1/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/logging/index_templates/os-v1/__init__.py::ISORT PASSED
invenio_jobs/logging/index_templates/os-v1/__init__.py::black PASSED
invenio_jobs/logging/index_templates/os-v2/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/logging/index_templates/os-v2/__init__.py::ISORT PASSED
invenio_jobs/logging/index_templates/os-v2/__init__.py::black PASSED
invenio_jobs/logging/jobs.py::PYDOCSTYLE PASSED
invenio_jobs/logging/jobs.py::ISORT PASSED
invenio_jobs/logging/jobs.py::black PASSED
invenio_jobs/logging/tasks.py::PYDOCSTYLE PASSED
invenio_jobs/logging/tasks.py::ISORT PASSED
invenio_jobs/logging/tasks.py::black PASSED
invenio_jobs/models.py::PYDOCSTYLE PASSED
invenio_jobs/models.py::ISORT PASSED
invenio_jobs/models.py::black PASSED
invenio_jobs/proxies.py::PYDOCSTYLE PASSED
invenio_jobs/proxies.py::ISORT PASSED
invenio_jobs/proxies.py::black PASSED
invenio_jobs/registry.py::PYDOCSTYLE PASSED
invenio_jobs/registry.py::ISORT PASSED
invenio_jobs/registry.py::black PASSED
invenio_jobs/resources/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/resources/__init__.py::ISORT PASSED
invenio_jobs/resources/__init__.py::black PASSED
invenio_jobs/resources/config.py::PYDOCSTYLE PASSED
invenio_jobs/resources/config.py::ISORT PASSED
invenio_jobs/resources/config.py::black PASSED
invenio_jobs/resources/resources.py::PYDOCSTYLE PASSED
invenio_jobs/resources/resources.py::ISORT PASSED
invenio_jobs/resources/resources.py::black PASSED
invenio_jobs/services/__init__.py::PYDOCSTYLE PASSED
invenio_jobs/services/__init__.py::ISORT PASSED
invenio_jobs/services/__init__.py::black PASSED
invenio_jobs/services/config.py::PYDOCSTYLE PASSED
invenio_jobs/services/config.py::ISORT PASSED
invenio_jobs/services/config.py::black PASSED
invenio_jobs/services/errors.py::PYDOCSTYLE PASSED
invenio_jobs/services/errors.py::ISORT PASSED
invenio_jobs/services/errors.py::black PASSED
invenio_jobs/services/links.py::PYDOCSTYLE PASSED
invenio_jobs/services/links.py::ISORT PASSED
invenio_jobs/services/links.py::black PASSED
invenio_jobs/services/permissions.py::PYDOCSTYLE PASSED
invenio_jobs/services/permissions.py::ISORT PASSED
invenio_jobs/services/permissions.py::black PASSED
invenio_jobs/services/results.py::PYDOCSTYLE PASSED
invenio_jobs/services/results.py::ISORT PASSED
invenio_jobs/services/results.py::black PASSED
invenio_jobs/services/scheduler.py::PYDOCSTYLE PASSED
invenio_jobs/services/scheduler.py::ISORT PASSED
invenio_jobs/services/scheduler.py::black PASSED
invenio_jobs/services/schema.py::PYDOCSTYLE PASSED
invenio_jobs/services/schema.py::ISORT PASSED
invenio_jobs/services/schema.py::black PASSED
invenio_jobs/services/services.py::PYDOCSTYLE PASSED
invenio_jobs/services/services.py::ISORT PASSED
invenio_jobs/services/services.py::black PASSED
invenio_jobs/services/ui_schema.py::PYDOCSTYLE PASSED
invenio_jobs/services/ui_schema.py::ISORT PASSED
invenio_jobs/services/ui_schema.py::black PASSED
invenio_jobs/tasks.py::PYDOCSTYLE PASSED
invenio_jobs/tasks.py::ISORT PASSED
invenio_jobs/tasks.py::black PASSED
invenio_jobs/utils.py::PYDOCSTYLE PASSED
invenio_jobs/utils.py::ISORT PASSED
invenio_jobs/utils.py::black PASSED
invenio_jobs/views.py::PYDOCSTYLE PASSED
invenio_jobs/views.py::ISORT PASSED
invenio_jobs/views.py::black PASSED
invenio_jobs/webpack.py::PYDOCSTYLE PASSED
invenio_jobs/webpack.py::ISORT PASSED
invenio_jobs/webpack.py::black PASSED

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
    from crypt import crypt as _crypt

.venv/lib/python3.12/site-packages/marshmallow_utils/fields/generated.py:12
.venv/lib/python3.12/site-packages/marshmallow_utils/fields/generated.py:12
    from marshmallow import __version_info__ as marshmallow_version

.venv/lib/python3.12/site-packages/jsonresolver/contrib/jsonschema.py:31
.venv/lib/python3.12/site-packages/jsonresolver/contrib/jsonschema.py:31
    from jsonschema import RefResolver as _RefResolver

.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
    from jsonschema import RefResolutionError, RefResolver

.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
    from jsonschema import RefResolutionError, RefResolver

.venv/lib/python3.12/site-packages/fs/__init__.py:4
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:3146
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

.venv/lib/python3.12/site-packages/fs/__init__.py:4
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/fs/opener/__init__.py:6
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:2558
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(parent)

.venv/lib/python3.12/site-packages/invenio_records_resources/services/files/schema.py:154
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/files/schema.py:154: RemovedInMarshmallow4Warning: The 'default' argument to fields is deprecated. Use 'dump_default' instead.
    storage_class = Str(default="L", dump_only=False)

    warnings.warn(

.venv/lib/python3.12/site-packages/marshmallow/fields.py:986
.venv/lib/python3.12/site-packages/marshmallow/fields.py:986
.venv/lib/python3.12/site-packages/marshmallow/fields.py:986
.venv/lib/python3.12/site-packages/marshmallow/fields.py:986
.venv/lib/python3.12/site-packages/marshmallow/fields.py:986
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/fields.py:986: RemovedInMarshmallow4Warning: The 'default' argument to fields is deprecated. Use 'dump_default' instead.
    super().__init__(**kwargs)

.venv/lib/python3.12/site-packages/marshmallow/utils.py:361
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/utils.py:361: ChangedInMarshmallow4Warning: `Field` should not be instantiated. Use `fields.Raw` or  another field subclass instead.
    return cls_or_instance()

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py:90: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    valid_data = self.schema(context=context, **schema_args).load(data)

    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py:105: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    return self.schema(context=context, **schema_args).dump(data)

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/fields.py:631: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    self._schema = schema_class(

    self._confirmed = datetime.utcnow() if confirmed else None

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_security/datastore.py:235: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    return self.user_model.query.get(identifier)

    target.updated = datetime.utcnow()

tests/test_services_job_logs.py::test_job_logs_search_limits_to_max_docs
tests/test_services_subtasks.py::test_create_subtask_run
    self.init_app(app)

tests/test_services_job_logs.py::test_job_logs_search_limits_to_max_docs
tests/test_services_subtasks.py::test_create_subtask_run
    self._set_cache(app, config)

tests/test_services_subtasks.py::test_create_subtask_run
tests/test_services_subtasks.py::test_start_processing_subtask
tests/test_services_subtasks.py::test_start_processing_subtask_invalid_status
tests/test_services_subtasks.py::test_finalize_subtask_success
tests/test_services_subtasks.py::test_finalize_subtask_failure
tests/test_services_subtasks.py::test_finalize_subtask_partial_success
tests/test_services_subtasks.py::test_add_total_entries
tests/test_services_subtasks.py::test_add_total_entries_invalid_values
tests/test_services_subtasks.py::test_finalize_subtask_with_errored_entries_message
    update_run(run, status=RunStatusEnum.RUNNING, started_at=datetime.utcnow())

tests/test_services_subtasks.py::test_create_subtask_run
tests/test_services_subtasks.py::test_start_processing_subtask
tests/test_services_subtasks.py::test_start_processing_subtask_invalid_status
tests/test_services_subtasks.py::test_finalize_subtask_success
tests/test_services_subtasks.py::test_finalize_subtask_failure
tests/test_services_subtasks.py::test_finalize_subtask_partial_success
tests/test_services_subtasks.py::test_add_total_entries
tests/test_services_subtasks.py::test_add_total_entries_invalid_values
tests/test_services_subtasks.py::test_finalize_subtask_with_errored_entries_message
    finished_at=datetime.utcnow(),

tests/test_services_subtasks.py::test_create_subtask_run
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('ae670a36-7c9b-4aff-ac31-bf1172920328'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_jobs/services/schema.py:127: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    super().__init__(*args, **kwargs)

tests/test_services_subtasks.py::test_start_processing_subtask
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('b665da42-762e-4cad-bb30-dfc2902ab42d'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

tests/test_services_subtasks.py::test_start_processing_subtask
tests/test_services_subtasks.py::test_finalize_subtask_success
tests/test_services_subtasks.py::test_finalize_subtask_failure
tests/test_services_subtasks.py::test_finalize_subtask_partial_success
tests/test_services_subtasks.py::test_finalize_subtask_partial_success
tests/test_services_subtasks.py::test_finalize_subtask_with_errored_entries_message
    run.started_at = datetime.utcnow()

tests/test_services_subtasks.py::test_start_processing_subtask_invalid_status
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('af8c27e6-4395-47ff-ac0a-ce1ae73277ed'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

tests/test_services_subtasks.py::test_finalize_subtask_success
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('96ebda78-8be2-42df-b9ae-ccef0ac72636'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

tests/test_services_subtasks.py::test_finalize_subtask_success
tests/test_services_subtasks.py::test_finalize_subtask_failure
tests/test_services_subtasks.py::test_finalize_subtask_partial_success
tests/test_services_subtasks.py::test_finalize_subtask_with_errored_entries_message
    finished_at_value = datetime.utcnow()

tests/test_services_subtasks.py::test_finalize_subtask_failure
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('f78b1cae-319a-47c0-b693-9cc4a40de25f'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

tests/test_services_subtasks.py::test_finalize_subtask_partial_success
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('12c8344e-578a-456e-88fe-c2cf0c42c41e'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

tests/test_services_subtasks.py::test_finalize_subtask_with_errored_entries_message
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_db/uow.py:193: SAWarning: Identity map already had an identity for (<class 'invenio_jobs.models.Run'>, (UUID('795280a7-0fb8-41e8-9995-de0eecc9b3de'),), None), replacing it with newly flushed object.   Are there load operations occurring inside of an event handler within the flush?
    self.session.commit()

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                                  Stmts   Miss  Cover   Missing
invenio_jobs/__init__.py                                                  3      0   100%
invenio_jobs/administration/__init__.py                                   0      0   100%
invenio_jobs/administration/jobs.py                                      73     15    79%   105, 109-115, 119-124, 133-138
invenio_jobs/administration/runs.py                                      46     25    46%   39-54, 58-65, 69-70, 74-75
invenio_jobs/alembic/1f896f6990b8_update_jobs_module_table_names.py      20     10    50%   25-32, 40-45
invenio_jobs/alembic/371f4cbcb73d_create_invenio_jobs_branch.py          10      2    80%   22, 27
invenio_jobs/alembic/356496a01197_create_invenio_jobs_tables.py          17      4    76%   30-62, 105-106
invenio_jobs/alembic/1753948224_add_subtasks_columns_to_jobs_run.py      31     22    29%   23-91, 102-114
invenio_jobs/api.py                                                       4      0   100%
invenio_jobs/config.py                                                   32      0   100%
invenio_jobs/errors.py                                                   11      3    73%   20-22
invenio_jobs/ext.py                                                      57      1    98%   106
invenio_jobs/jobs.py                                                     32      7    78%   65-67, 89, 102, 105-113
invenio_jobs/logging/__init__.py                                          0      0   100%
invenio_jobs/logging/celery_signals.py                                   19      5    74%   23-26, 38-40, 49
invenio_jobs/logging/index_templates/__init__.py                          0      0   100%
invenio_jobs/logging/index_templates/os-v1/__init__.py                    0      0   100%
invenio_jobs/logging/index_templates/os-v2/__init__.py                    0      0   100%
invenio_jobs/logging/jobs.py                                             63      5    92%   98, 119-121, 125-126
invenio_jobs/logging/tasks.py                                             8      2    75%   20-21
invenio_jobs/models.py                                                  130     11    92%   80-88, 215-217
invenio_jobs/proxies.py                                                  12      0   100%
invenio_jobs/registry.py                                                 26      5    81%   23, 32-35
invenio_jobs/resources/__init__.py                                        3      0   100%
invenio_jobs/resources/config.py                                         57      0   100%
invenio_jobs/resources/resources.py                                     126     14    89%   48-53, 58-63, 210-217, 237-243, 249-255
invenio_jobs/services/__init__.py                                         4      0   100%
invenio_jobs/services/config.py                                          79      0   100%
invenio_jobs/services/errors.py                                          22      1    95%   63
invenio_jobs/services/links.py                                           11      1    91%   38
invenio_jobs/services/permissions.py                                     25      0   100%
invenio_jobs/services/results.py                                        100     13    87%   53-54, 83, 92-95, 120-121, 148-149, 167, 169-170
invenio_jobs/services/scheduler.py                                       55     31    44%   31-32, 37-39, 59, 66, 70-71, 75-94, 99-106, 113-117
invenio_jobs/services/schema.py                                         149     10    93%   51-56, 132, 185, 288, 321-322
invenio_jobs/services/services.py                                       246     31    87%   52, 60-64, 91-93, 192-194, 212, 309, 418, 438, 474-488, 493-499, 508, 544, 555, 561-562
invenio_jobs/services/ui_schema.py                                       19      0   100%
invenio_jobs/tasks.py                                                    63     23    63%   28, 40-43, 67, 71-86, 88-107, 112, 117, 130
invenio_jobs/utils.py                                                    28     19    32%   20-31, 36-47, 55
invenio_jobs/views.py                                                    14      0   100%
invenio_jobs/webpack.py                                                   2      0   100%
TOTAL                                                                  1597    260    84%
================ 171 passed, 3 skipped, 479 warnings in 23.79s =================
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-elasticsearch-1  Stopping
 Container docker_services_cli-rabbitmq-1  Stopping
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Container docker_services_cli-elasticsearch-1  Stopped
 Container docker_services_cli-elasticsearch-1  Removing
 Container docker_services_cli-elasticsearch-1  Removed
 Container docker_services_cli-rabbitmq-1  Stopped
 Container docker_services_cli-rabbitmq-1  Removing
 Container docker_services_cli-rabbitmq-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
