 postgresql Pulling 
 redis Pulling 
 opensearch Pulling 
 rabbitmq Pulling 
 redis Pulled 
 rabbitmq Pulled 
 postgresql Pulled 
 opensearch Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-opensearch-1  Creating
 Container docker_services_cli-rabbitmq-1  Creating
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-rabbitmq-1  Created
 Container docker_services_cli-opensearch-1  Created
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-opensearch-1  Starting
 Container docker_services_cli-rabbitmq-1  Starting
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-postgresql-1  Started
 Container docker_services_cli-redis-1  Started
 Container docker_services_cli-rabbitmq-1  Started
 Container docker_services_cli-opensearch-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: docs, tests, invenio_audit_logs
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 114 items

docs/conf.py::PYDOCSTYLE PASSED
docs/conf.py::ISORT PASSED
docs/conf.py::black PASSED
tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/mock_module/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/__init__.py::ISORT PASSED
tests/mock_module/__init__.py::black PASSED
tests/mock_module/auditlog/actions.py::PYDOCSTYLE PASSED
tests/mock_module/auditlog/actions.py::ISORT PASSED
tests/mock_module/auditlog/actions.py::black PASSED
tests/services/__init__.py::PYDOCSTYLE PASSED
tests/services/__init__.py::ISORT PASSED
tests/services/__init__.py::black PASSED
tests/services/conftest.py::PYDOCSTYLE PASSED
tests/services/conftest.py::ISORT PASSED
tests/services/conftest.py::black PASSED
tests/services/test_action_builder.py::ISORT PASSED
tests/services/test_action_builder.py::black PASSED
tests/services/test_action_builder.py::test_audit_log_builder JSONSCHEMAS_HOST is set to localhost
PASSED
tests/services/test_service.py::ISORT PASSED
tests/services/test_service.py::black PASSED
tests/services/test_service.py::test_audit_log_create JSONSCHEMAS_HOST is set to localhost
[2025-12-10 10:55:14,800] WARNING in ext: JSONSCHEMAS_HOST is set to localhost
JSONSCHEMAS_HOST is set to localhost
PASSED

tests/services/test_service.py::test_audit_log_create_identity_mismatch PASSED

tests/services/test_service.py::test_audit_log_create_system_identity PASSED

tests/test_alembic.py::ISORT PASSED
tests/test_alembic.py::black PASSED
tests/test_alembic.py::test_alembic JSONSCHEMAS_HOST is set to localhost
[2025-12-10 10:55:16,049] WARNING in ext: JSONSCHEMAS_HOST is set to localhost
JSONSCHEMAS_HOST is set to localhost
JSONSCHEMAS_HOST is set to localhost
PASSED

tests/test_invenio_audit_logs.py::ISORT PASSED
tests/test_invenio_audit_logs.py::black PASSED
tests/test_invenio_audit_logs.py::test_version PASSED
tests/test_invenio_audit_logs.py::test_init PASSED
invenio_audit_logs/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/__init__.py::ISORT PASSED
invenio_audit_logs/__init__.py::black PASSED
invenio_audit_logs/alembic/1743073617_create_audit_logs_branch.py::PYDOCSTYLE PASSED
invenio_audit_logs/alembic/1743073617_create_audit_logs_branch.py::ISORT PASSED
invenio_audit_logs/alembic/1743073617_create_audit_logs_branch.py::black PASSED
invenio_audit_logs/alembic/1743073720_create_audit_logs_table.py::PYDOCSTYLE PASSED
invenio_audit_logs/alembic/1743073720_create_audit_logs_table.py::ISORT PASSED
invenio_audit_logs/alembic/1743073720_create_audit_logs_table.py::black PASSED
invenio_audit_logs/config.py::PYDOCSTYLE PASSED
invenio_audit_logs/config.py::ISORT PASSED
invenio_audit_logs/config.py::black PASSED
invenio_audit_logs/ext.py::PYDOCSTYLE PASSED
invenio_audit_logs/ext.py::ISORT PASSED
invenio_audit_logs/ext.py::black PASSED
invenio_audit_logs/proxies.py::PYDOCSTYLE PASSED
invenio_audit_logs/proxies.py::ISORT PASSED
invenio_audit_logs/proxies.py::black PASSED
invenio_audit_logs/records/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/__init__.py::ISORT PASSED
invenio_audit_logs/records/__init__.py::black PASSED
invenio_audit_logs/records/api.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/api.py::ISORT PASSED
invenio_audit_logs/records/api.py::black PASSED
invenio_audit_logs/records/mappings/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/mappings/__init__.py::ISORT PASSED
invenio_audit_logs/records/mappings/__init__.py::black PASSED
invenio_audit_logs/records/mappings/templates/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/mappings/templates/__init__.py::ISORT PASSED
invenio_audit_logs/records/mappings/templates/__init__.py::black PASSED
invenio_audit_logs/records/mappings/templates/os-v1/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/mappings/templates/os-v1/__init__.py::ISORT PASSED
invenio_audit_logs/records/mappings/templates/os-v1/__init__.py::black PASSED
invenio_audit_logs/records/mappings/templates/os-v2/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/mappings/templates/os-v2/__init__.py::ISORT PASSED
invenio_audit_logs/records/mappings/templates/os-v2/__init__.py::black PASSED
invenio_audit_logs/records/models.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/models.py::ISORT PASSED
invenio_audit_logs/records/models.py::black PASSED
invenio_audit_logs/records/systemfields/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/systemfields/__init__.py::ISORT PASSED
invenio_audit_logs/records/systemfields/__init__.py::black PASSED
invenio_audit_logs/records/systemfields/action.py::PYDOCSTYLE PASSED
invenio_audit_logs/records/systemfields/action.py::ISORT PASSED
invenio_audit_logs/records/systemfields/action.py::black PASSED
invenio_audit_logs/resources/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/resources/__init__.py::ISORT PASSED
invenio_audit_logs/resources/__init__.py::black PASSED
invenio_audit_logs/resources/config.py::PYDOCSTYLE PASSED
invenio_audit_logs/resources/config.py::ISORT PASSED
invenio_audit_logs/resources/config.py::black PASSED
invenio_audit_logs/resources/resource.py::PYDOCSTYLE PASSED
invenio_audit_logs/resources/resource.py::ISORT PASSED
invenio_audit_logs/resources/resource.py::black PASSED
invenio_audit_logs/services/__init__.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/__init__.py::ISORT PASSED
invenio_audit_logs/services/__init__.py::black PASSED
invenio_audit_logs/services/action.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/action.py::ISORT PASSED
invenio_audit_logs/services/action.py::black PASSED
invenio_audit_logs/services/config.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/config.py::ISORT PASSED
invenio_audit_logs/services/config.py::black PASSED
invenio_audit_logs/services/permissions.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/permissions.py::ISORT PASSED
invenio_audit_logs/services/permissions.py::black PASSED
invenio_audit_logs/services/results.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/results.py::ISORT PASSED
invenio_audit_logs/services/results.py::black PASSED
invenio_audit_logs/services/schema.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/schema.py::ISORT PASSED
invenio_audit_logs/services/schema.py::black PASSED
invenio_audit_logs/services/service.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/service.py::ISORT PASSED
invenio_audit_logs/services/service.py::black PASSED
invenio_audit_logs/services/uow.py::PYDOCSTYLE PASSED
invenio_audit_logs/services/uow.py::ISORT PASSED
invenio_audit_logs/services/uow.py::black PASSED
invenio_audit_logs/views.py::PYDOCSTYLE PASSED
invenio_audit_logs/views.py::ISORT PASSED
invenio_audit_logs/views.py::black PASSED

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
    from crypt import crypt as _crypt

.venv/lib/python3.12/site-packages/jsonresolver/contrib/jsonschema.py:31
.venv/lib/python3.12/site-packages/jsonresolver/contrib/jsonschema.py:31
    from jsonschema import RefResolver as _RefResolver

.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
    from jsonschema import RefResolutionError, RefResolver

.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
    from jsonschema import RefResolutionError, RefResolver

.venv/lib/python3.12/site-packages/fs/__init__.py:4
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:3146
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

.venv/lib/python3.12/site-packages/fs/__init__.py:4
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/fs/opener/__init__.py:6
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:2558
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(parent)

.venv/lib/python3.12/site-packages/marshmallow_utils/fields/generated.py:12
.venv/lib/python3.12/site-packages/marshmallow_utils/fields/generated.py:12
    from marshmallow import __version_info__ as marshmallow_version

.venv/lib/python3.12/site-packages/invenio_records_resources/services/files/schema.py:154
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/files/schema.py:154: RemovedInMarshmallow4Warning: The 'default' argument to fields is deprecated. Use 'dump_default' instead.
    storage_class = Str(default="L", dump_only=False)

.venv/lib/python3.12/site-packages/invenio_records_resources/services/base/links.py:140
.venv/lib/python3.12/site-packages/invenio_records_resources/services/base/links.py:140
.venv/lib/python3.12/site-packages/invenio_records_resources/services/base/links.py:140
.venv/lib/python3.12/site-packages/invenio_records_resources/services/base/links.py:140
    warnings.warn(

tests/services/test_service.py::test_audit_log_create
tests/test_alembic.py::test_alembic
    self.init_app(app)

tests/services/test_service.py::test_audit_log_create
tests/test_alembic.py::test_alembic
    self._set_cache(app, config)

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_identity_mismatch
tests/services/test_service.py::test_audit_log_create_identity_mismatch
tests/services/test_service.py::test_audit_log_create_system_identity
tests/services/test_service.py::test_audit_log_create_system_identity
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_identity_mismatch

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_identity_mismatch
    _security.datetime_factory(),

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_identity_mismatch
    target.updated = datetime.utcnow()

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_identity_mismatch
    created = datetime.utcnow()

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_system_identity
    data["created"] = datetime.utcnow().isoformat()

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_system_identity
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py:90: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    valid_data = self.schema(context=context, **schema_args).load(data)

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_system_identity
tests/services/test_service.py::test_audit_log_create_system_identity
tests/services/test_service.py::test_audit_log_create_system_identity
tests/services/test_service.py::test_audit_log_create_system_identity
tests/services/test_service.py::test_audit_log_create_system_identity
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/fields.py:631: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    self._schema = schema_class(

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_system_identity
    target.updated = datetime.utcnow()

tests/services/test_service.py::test_audit_log_create
tests/services/test_service.py::test_audit_log_create_system_identity
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py:105: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    return self.schema(context=context, **schema_args).dump(data)

tests/test_alembic.py::test_alembic
    util.warn_deprecated(

tests/test_alembic.py::test_alembic
    super().alter_column(

tests/test_alembic.py::test_alembic
    insp = Inspector.from_engine(ctx.connection.engine)

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                                Stmts   Miss  Cover   Missing
invenio_audit_logs/__init__.py                                          3      0   100%
invenio_audit_logs/alembic/1743073617_create_audit_logs_branch.py      10      0   100%
invenio_audit_logs/alembic/1743073720_create_audit_logs_table.py       12      0   100%
invenio_audit_logs/config.py                                           11      0   100%
invenio_audit_logs/ext.py                                              28      0   100%
invenio_audit_logs/proxies.py                                           8      0   100%
invenio_audit_logs/records/__init__.py                                  2      0   100%
invenio_audit_logs/records/api.py                                      21      0   100%
invenio_audit_logs/records/mappings/__init__.py                         0      0   100%
invenio_audit_logs/records/mappings/templates/__init__.py               0      0   100%
invenio_audit_logs/records/mappings/templates/os-v1/__init__.py         0      0   100%
invenio_audit_logs/records/mappings/templates/os-v2/__init__.py         0      0   100%
invenio_audit_logs/records/models.py                                    9      0   100%
invenio_audit_logs/records/systemfields/__init__.py                     2      0   100%
invenio_audit_logs/records/systemfields/action.py                      45     11    76%   26, 36-38, 42-44, 50, 54, 79-80
invenio_audit_logs/resources/__init__.py                                3      0   100%
invenio_audit_logs/resources/config.py                                 16      0   100%
invenio_audit_logs/resources/resource.py                               26      4    85%   52-57, 64-68
invenio_audit_logs/services/__init__.py                                 6      0   100%
invenio_audit_logs/services/action.py                                  22      6    73%   28, 41-42, 46, 51, 55
invenio_audit_logs/services/config.py                                  40      0   100%
invenio_audit_logs/services/permissions.py                              9      0   100%
invenio_audit_logs/services/results.py                                 51     19    63%   68-70, 77-80, 85-96, 100-115
invenio_audit_logs/services/schema.py                                  48      5    90%   105, 115, 188-191
invenio_audit_logs/services/service.py                                 20      1    95%   33
invenio_audit_logs/services/uow.py                                     15      0   100%
invenio_audit_logs/views.py                                             5      0   100%
TOTAL                                                                 412     46    89%
====================== 114 passed, 53 warnings in 20.38s =======================
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-rabbitmq-1  Stopping
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-opensearch-1  Stopping
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Container docker_services_cli-opensearch-1  Stopped
 Container docker_services_cli-opensearch-1  Removing
 Container docker_services_cli-opensearch-1  Removed
 Container docker_services_cli-rabbitmq-1  Stopped
 Container docker_services_cli-rabbitmq-1  Removing
 Container docker_services_cli-rabbitmq-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
