 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-opensearch-1  Creating
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-opensearch-1  Created
 Container docker_services_cli-opensearch-1  Starting
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-redis-1  Started
 Container docker_services_cli-postgresql-1  Started
 Container docker_services_cli-opensearch-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, Faker-38.2.0, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collected 714 items

invenio_communities/__init__.py ...                                      [  0%]
invenio_communities/administration/__init__.py ...                       [  0%]
invenio_communities/administration/communities.py ...                    [  1%]
invenio_communities/alembic/__init__.py ...                              [  1%]
invenio_communities/alembic/02cd82910727_update_role_id_type_upgrade.py . [  1%]
..                                                                       [  2%]
invenio_communities/alembic/37b21951084c_update_role_id_type_downgrade.py . [  2%]
..                                                                       [  2%]
invenio_communities/alembic/5b478fe7ef7f_create_featured_communities_table.py . [  2%]
..                                                                       [  2%]
invenio_communities/alembic/5c68d45c80f0_add_deletion_status_to_communities.py . [  3%]
..                                                                       [  3%]
invenio_communities/alembic/72b37bb4119c_create_indeces_for_bucket_id.py . [  3%]
..                                                                       [  3%]
invenio_communities/alembic/90642d415317_create_communities_branch.py .. [  4%]
.                                                                        [  4%]
invenio_communities/alembic/a3f5a8635cbb_remove_version_table.py ...     [  4%]
invenio_communities/alembic/de9c14cbb0b2_create_communities_tables.py .. [  4%]
.                                                                        [  5%]
invenio_communities/alembic/f701a32e6fbe_create_communities_members_table.py . [  5%]
..                                                                       [  5%]
invenio_communities/alembic/fbe746957cfc_create_member_tables.py ...     [  5%]
invenio_communities/cache/__init__.py ...                                [  6%]
invenio_communities/cache/cache.py ...                                   [  6%]
invenio_communities/cache/redis.py ...                                   [  7%]
invenio_communities/cli.py ...                                           [  7%]
invenio_communities/communities/__init__.py ...                          [  7%]
invenio_communities/communities/dumpers/__init__.py ...                  [  8%]
invenio_communities/communities/dumpers/featured.py ...                  [  8%]
invenio_communities/communities/entity_resolvers.py ...                  [  9%]
invenio_communities/communities/records/__init__.py ...                  [  9%]
invenio_communities/communities/records/api.py ...                       [ 10%]
invenio_communities/communities/records/jsonschemas/__init__.py ...      [ 10%]
invenio_communities/communities/records/mappings/__init__.py ...         [ 10%]
invenio_communities/communities/records/mappings/os-v1/__init__.py ...   [ 11%]
invenio_communities/communities/records/mappings/os-v2/__init__.py ...   [ 11%]
invenio_communities/communities/records/mappings/v7/__init__.py ...      [ 12%]
invenio_communities/communities/records/models.py ...                    [ 12%]
invenio_communities/communities/records/systemfields/__init__.py ...     [ 13%]
invenio_communities/communities/records/systemfields/access.py ...       [ 13%]
invenio_communities/communities/records/systemfields/children.py ...     [ 13%]
invenio_communities/communities/records/systemfields/deletion_status.py . [ 14%]
..                                                                       [ 14%]
invenio_communities/communities/records/systemfields/is_verified.py ...  [ 14%]
invenio_communities/communities/records/systemfields/parent_community.py . [ 14%]
..                                                                       [ 15%]
invenio_communities/communities/records/systemfields/pidslug.py ...      [ 15%]
invenio_communities/communities/records/systemfields/tombstone.py ...    [ 15%]
invenio_communities/communities/resources/__init__.py ...                [ 16%]
invenio_communities/communities/resources/args.py ...                    [ 16%]
invenio_communities/communities/resources/config.py ...                  [ 17%]
invenio_communities/communities/resources/resource.py ...                [ 17%]
invenio_communities/communities/resources/serializer.py ...              [ 18%]
invenio_communities/communities/resources/ui_schema.py ...               [ 18%]
invenio_communities/communities/schema.py ...                            [ 18%]
invenio_communities/communities/services/__init__.py ...                 [ 19%]
invenio_communities/communities/services/components.py ...               [ 19%]
invenio_communities/communities/services/config.py ...                   [ 20%]
invenio_communities/communities/services/facets.py ...                   [ 20%]
invenio_communities/communities/services/links.py ...                    [ 21%]
invenio_communities/communities/services/results.py ...                  [ 21%]
invenio_communities/communities/services/search_params.py ...            [ 21%]
invenio_communities/communities/services/service.py ...                  [ 22%]
invenio_communities/communities/services/sort.py ...                     [ 22%]
invenio_communities/communities/services/uow.py ...                      [ 23%]
invenio_communities/config.py ...                                        [ 23%]
invenio_communities/errors.py ...                                        [ 23%]
invenio_communities/ext.py ...                                           [ 24%]
invenio_communities/fixtures/__init__.py ...                             [ 24%]
invenio_communities/fixtures/demo.py ...                                 [ 25%]
invenio_communities/fixtures/tasks.py ...                                [ 25%]
invenio_communities/generators.py ...                                    [ 26%]
invenio_communities/members/__init__.py ...                              [ 26%]
invenio_communities/members/errors.py ...                                [ 26%]
invenio_communities/members/records/__init__.py ...                      [ 27%]
invenio_communities/members/records/api.py ...                           [ 27%]
invenio_communities/members/records/mappings/__init__.py ...             [ 28%]
invenio_communities/members/records/mappings/os-v1/__init__.py ...       [ 28%]
invenio_communities/members/records/mappings/os-v2/__init__.py ...       [ 28%]
invenio_communities/members/records/mappings/v7/__init__.py ...          [ 29%]
invenio_communities/members/records/models.py ...                        [ 29%]
invenio_communities/members/resources/__init__.py ...                    [ 30%]
invenio_communities/members/resources/config.py ...                      [ 30%]
invenio_communities/members/resources/resource.py ...                    [ 31%]
invenio_communities/members/services/__init__.py ...                     [ 31%]
invenio_communities/members/services/components.py ...                   [ 31%]
invenio_communities/members/services/config.py ...                       [ 32%]
invenio_communities/members/services/facets.py ...                       [ 32%]
invenio_communities/members/services/fields.py ...                       [ 33%]
invenio_communities/members/services/request.py ...                      [ 33%]
invenio_communities/members/services/schemas.py ...                      [ 34%]
invenio_communities/members/services/service.py ...                      [ 34%]
invenio_communities/notifications/__init__.py ...                        [ 34%]
invenio_communities/notifications/builders.py ...                        [ 35%]
invenio_communities/notifications/generators.py ...                      [ 35%]
invenio_communities/permissions.py ...                                   [ 36%]
invenio_communities/proxies.py ...                                       [ 36%]
invenio_communities/records/__init__.py ...                              [ 36%]
invenio_communities/records/records/__init__.py ...                      [ 37%]
invenio_communities/records/records/models.py ...                        [ 37%]
invenio_communities/records/records/systemfields/__init__.py ...         [ 38%]
invenio_communities/records/records/systemfields/communities/__init__.py . [ 38%]
..                                                                       [ 38%]
invenio_communities/records/records/systemfields/communities/context.py . [ 38%]
..                                                                       [ 39%]
invenio_communities/records/records/systemfields/communities/field.py .. [ 39%]
.                                                                        [ 39%]
invenio_communities/records/records/systemfields/communities/manager.py . [ 39%]
..                                                                       [ 39%]
invenio_communities/requests/user_moderation/__init__.py ...             [ 40%]
invenio_communities/requests/user_moderation/actions.py ...              [ 40%]
invenio_communities/requests/user_moderation/tasks.py ...                [ 41%]
invenio_communities/roles.py ...                                         [ 41%]
invenio_communities/searchapp.py ...                                     [ 42%]
invenio_communities/subcommunities/__init__.py ...                       [ 42%]
invenio_communities/subcommunities/resources/__init__.py ...             [ 42%]
invenio_communities/subcommunities/resources/config.py ...               [ 43%]
invenio_communities/subcommunities/resources/resource.py ...             [ 43%]
invenio_communities/subcommunities/services/__init__.py ...              [ 44%]
invenio_communities/subcommunities/services/config.py ...                [ 44%]
invenio_communities/subcommunities/services/errors.py ...                [ 44%]
invenio_communities/subcommunities/services/request.py ...               [ 45%]
invenio_communities/subcommunities/services/schema.py ...                [ 45%]
invenio_communities/subcommunities/services/service.py ...               [ 46%]
invenio_communities/tasks.py ...                                         [ 46%]
invenio_communities/utils.py ...                                         [ 47%]
invenio_communities/views/__init__.py ...                                [ 47%]
invenio_communities/views/api.py ...                                     [ 47%]
invenio_communities/views/communities.py ...                             [ 48%]
invenio_communities/views/decorators.py ...                              [ 48%]
invenio_communities/views/template_loader.py ...                         [ 49%]
invenio_communities/views/ui.py ...                                      [ 49%]
invenio_communities/webpack.py ...                                       [ 50%]
setup.py ...                                                             [ 50%]
tests/__init__.py ...                                                    [ 50%]
tests/cache/__init__.py ...                                              [ 51%]
tests/cache/test_identity_redis_cache.py ......                          [ 52%]
tests/communities/__init__.py ...                                        [ 52%]
tests/communities/conftest.py ...                                        [ 52%]
tests/communities/test_alembic.py ..s                                    [ 53%]
tests/communities/test_cli.py ...
.                                       [ 53%]
tests/communities/test_community_ui_serializer.py ...
                    [ 54%]
tests/communities/test_components.py ...
.
.
.
.
.
                            [ 55%]
tests/communities/test_parent_community.py ...
.
.
...
                      [ 56%]
tests/communities/test_permissions.py ...
                                [ 57%]
tests/communities/test_relations_organizations.py ...
.
.
.
.
.
               [ 58%]
tests/communities/test_relations_types.py ...
.
.
.
.
.                       [ 59%]
tests/communities/test_resources.py ...
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
                [ 62%]
tests/communities/test_services.py ...
.
.
.
.
.
..
.
.
.
.
.
.
.
.
.
.
.
.
.
.
              [ 65%]
tests/communities/test_subcommunities.py ...
.
.
.
.
                         [ 66%]
tests/communities/test_tombstone.py ...
.
.
....
                            [ 67%]
tests/communities/test_ui.py ...
                                         [ 68%]
tests/communities/tests_views.py ...                                     [ 68%]
tests/conftest.py ...                                                    [ 69%]
tests/members/__init__.py ...                                            [ 69%]
tests/members/conftest.py ...                                            [ 69%]
tests/members/test_members_components.py ...
.
.
.
.
                         [ 70%]
tests/members/test_members_no_groups.py ...
.
.
.
.
.
.
.
                       [ 72%]
tests/members/test_members_notifications.py ...
.
.
.
.
                      [ 73%]
tests/members/test_members_resource.py ...
.
.
.
.
.
.
.
.
.
.
.
.
.
...               [ 75%]
tests/members/test_members_services.py ...
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
..
..
.
.
.
.
.
.
.
. [ 80%]
.
.
.
.
.
.
.
.
.
..
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
...
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
. [ 90%]
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
..
.
                                                    [ 93%]
tests/mock_module/__init__.py ...                                        [ 93%]
tests/records/__init__.py ...                                            [ 94%]
tests/records/conftest.py ...                                            [ 94%]
tests/records/mock_module/__init__.py ...                                [ 95%]
tests/records/mock_module/api.py ...                                     [ 95%]
tests/records/mock_module/jsonschemas/__init__.py ...                    [ 96%]
tests/records/mock_module/mappings/__init__.py ...                       [ 96%]
tests/records/mock_module/mappings/v6/__init__.py ...                    [ 96%]
tests/records/mock_module/mappings/v7/__init__.py ...                    [ 97%]
tests/records/mock_module/models.py ...                                  [ 97%]
tests/records/test_mockrecords_api.py ...
.
.
.
.
.
.
.
.
.
.
                      [ 99%]
tests/test_notifications.py ...
                                          [100%]

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
    from crypt import crypt as _crypt

.venv/lib/python3.12/site-packages/marshmallow_utils/fields/generated.py:12
.venv/lib/python3.12/site-packages/marshmallow_utils/fields/generated.py:12
    from marshmallow import __version_info__ as marshmallow_version

.venv/lib/python3.12/site-packages/jsonresolver/contrib/jsonschema.py:31
.venv/lib/python3.12/site-packages/jsonresolver/contrib/jsonschema.py:31
    from jsonschema import RefResolver as _RefResolver

.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
    from jsonschema import RefResolutionError, RefResolver

.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
.venv/lib/python3.12/site-packages/invenio_records/resolver.py:14
    from jsonschema import RefResolutionError, RefResolver

.venv/lib/python3.12/site-packages/fs/__init__.py:4
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:3146
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

.venv/lib/python3.12/site-packages/fs/__init__.py:4
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/fs/opener/__init__.py:6
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    __import__("pkg_resources").declare_namespace(__name__)  # type: ignore

.venv/lib/python3.12/site-packages/pkg_resources/__init__.py:2558
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(parent)

    warnings.warn(

.venv/lib/python3.12/site-packages/invenio_vocabularies/config.py:15
    from idutils import is_doi, is_gnd, is_isni, is_orcid, is_ror, is_url

.venv/lib/python3.12/site-packages/marshmallow/utils.py:361
.venv/lib/python3.12/site-packages/marshmallow/utils.py:361
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/utils.py:361: ChangedInMarshmallow4Warning: `Field` should not be instantiated. Use `fields.Raw` or  another field subclass instead.
    return cls_or_instance()

    self.init_app(app)

    warnings.warn(

    self._set_cache(app, config)

    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

    self._confirmed = datetime.utcnow() if confirmed else None

    datetime.utcnow()

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_security/datastore.py:235: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    return self.user_model.query.get(identifier)

    target.updated = datetime.utcnow()

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py:90: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    valid_data = self.schema(context=context, **schema_args).load(data)

    target.updated = datetime.utcnow()

  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/marshmallow/fields.py:631: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    self._schema = schema_class(

    now_ = datetime.utcnow()

tests/communities/test_community_ui_serializer.py::test_ui_serializer
tests/communities/test_components.py::test_oai_set_create_community
tests/communities/test_resources.py::test_simple_flow
tests/communities/test_services.py::test_search_featured
tests/communities/test_subcommunities.py::test_service_join_already_existing
tests/members/test_members_components.py::test_accept_invite_cache_clear
tests/members/test_members_no_groups.py::test_invite_member_with_groups_disabled
tests/members/test_members_notifications.py::test_community_invitation_submit_notification
tests/test_notifications.py::test_user_recipient_generator
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_records_resources/services/records/schema.py:105: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    return self.schema(context=context, **schema_args).dump(data)

tests/communities/test_community_ui_serializer.py::test_ui_serializer
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/serializers/base.py:53: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    self.object_schema = object_schema_cls(context=schema_context, **schema_kwargs)

tests/communities/test_community_ui_serializer.py::test_ui_serializer
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_resources/serializers/base.py:55: RemovedInMarshmallow4Warning: The `context` parameter is deprecated and will be removed in marshmallow 4.0. Use `contextvars.ContextVar` to pass context instead.
    self.list_schema = list_schema_cls(

tests/communities/test_components.py::test_oai_set_create_community
tests/communities/test_components.py::test_oai_set_delete_community
tests/communities/test_components.py::test_oai_set_renamed
tests/communities/test_components.py::test_oai_set_update
tests/communities/test_components.py::test_children_component_without_children
    slug=str(datetime.utcnow().timestamp()).replace(".", "-")

tests/communities/test_components.py::test_oai_set_create_community
tests/communities/test_components.py::test_oai_set_delete_community
tests/communities/test_components.py::test_oai_set_renamed
tests/communities/test_components.py::test_oai_set_update
    slug=str(datetime.utcnow().timestamp()).replace(".", "-")

    value = datetime.utcnow()

    warnings.warn(

    _security.datetime_factory(),

    created = datetime.utcnow()

    return cls(int(id_s, 16), datetime.utcfromtimestamp(int(created_s, 16)))

    now = now or datetime.utcnow()

tests/communities/test_resources.py::test_simple_flow
tests/communities/test_subcommunities.py::test_subcommunity_simple_flow
    current_app.logger.warn(

    target.updated = datetime.utcnow()

    slug=str(datetime.utcnow().timestamp()).replace(".", "-")

tests/communities/test_services.py::test_search_featured
    "start_date": datetime.utcnow().isoformat(),

tests/communities/test_services.py::test_search_featured
    "start_date": (datetime.utcnow() + timedelta(days=1)).isoformat(),

tests/communities/test_services.py::test_search_featured
    data["start_date"] = (datetime.utcnow() - timedelta(days=1)).isoformat()

tests/communities/test_services.py::test_search_featured
    data["start_date"] = datetime.utcnow().isoformat()

tests/communities/test_services.py::test_reindex_featured_entries_task
    "start_date": (datetime.utcnow() + timedelta(days=1)).isoformat(),

tests/communities/test_services.py::test_reindex_featured_entries_task
    datetime.utcnow() + timedelta(seconds=near_future_difference)

tests/communities/test_services.py::test_reindex_featured_entries_task
    now = datetime.utcnow().isoformat()

tests/communities/test_services.py::test_create_featured
    slug=str(datetime.utcnow().timestamp()).replace(".", "-")

tests/communities/test_services.py::test_create_featured
    "start_date": datetime.utcnow().isoformat(),

tests/communities/test_services.py::test_get_featured
    "start_date": datetime.utcnow().isoformat(),

tests/communities/test_services.py::test_get_featured
    "start_date": (datetime.utcnow() + timedelta(days=1)).isoformat(),

tests/communities/test_services.py::test_delete_featured
    "start_date": datetime.utcnow().isoformat(),

tests/communities/test_services.py::test_delete_featured
    "start_date": (datetime.utcnow() + timedelta(days=1)).isoformat(),

tests/communities/test_services.py::test_update_featured
    "start_date": datetime.utcnow().isoformat(),

tests/communities/test_services.py::test_update_featured
    "start_date": (datetime.utcnow() + timedelta(days=1)).isoformat(),

tests/communities/test_services.py::test_community_deletion
    assert arrow.get(tombstone.removal_date).date() == datetime.utcnow().date()

tests/communities/test_tombstone.py::test_tombstone_creation
    "removal_date": datetime.datetime.utcnow(),

tests/communities/test_tombstone.py::test_tombstone_invalid_removed_by
    for invalid_value in [[], datetime.datetime.utcnow()]:

    datetime.utcnow().replace(tzinfo=timezone.utc)

    now = datetime.utcnow()

tests/records/test_mockrecords_api.py::test_record_create_empty
    warnings.warn(

- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-original.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                                             Stmts   Miss  Cover   Missing
invenio_communities/__init__.py                                                      4      0   100%
invenio_communities/administration/__init__.py                                       0      0   100%
invenio_communities/administration/communities.py                                   42      1    98%   78
invenio_communities/alembic/02cd82910727_update_role_id_type_upgrade.py             13      5    62%   33-55, 67
invenio_communities/alembic/5b478fe7ef7f_create_featured_communities_table.py       12      2    83%   24, 54
invenio_communities/alembic/5c68d45c80f0_add_deletion_status_to_communities.py      27     18    33%   22-43, 49-62, 67
invenio_communities/alembic/37b21951084c_update_role_id_type_downgrade.py           13      5    62%   22, 27-51
invenio_communities/alembic/72b37bb4119c_create_indeces_for_bucket_id.py            11      4    64%   21-27, 37-40
invenio_communities/alembic/90642d415317_create_communities_branch.py                8      2    75%   20, 25
invenio_communities/alembic/__init__.py                                              0      0   100%
invenio_communities/alembic/a3f5a8635cbb_remove_version_table.py                    22     12    45%   24-40, 48-111
invenio_communities/alembic/de9c14cbb0b2_create_communities_tables.py               24     14    42%   25-171, 178-193
invenio_communities/alembic/f701a32e6fbe_create_communities_members_table.py        14      4    71%   24-65, 75-76
invenio_communities/alembic/fbe746957cfc_create_member_tables.py                    36     26    28%   27-147, 157-196
invenio_communities/cache/__init__.py                                                0      0   100%
invenio_communities/cache/cache.py                                                  18      0   100%
invenio_communities/cache/redis.py                                                  29      1    97%   64
invenio_communities/cli.py                                                          76     21    72%   47-49, 56-62, 69-74, 99-100, 108-112, 124-126
invenio_communities/communities/__init__.py                                          3      0   100%
invenio_communities/communities/dumpers/__init__.py                                  0      0   100%
invenio_communities/communities/dumpers/featured.py                                 16      0   100%
invenio_communities/communities/entity_resolvers.py                                 32      9    72%   35-48, 69, 80
invenio_communities/communities/records/__init__.py                                  0      0   100%
invenio_communities/communities/records/api.py                                      45      0   100%
invenio_communities/communities/records/jsonschemas/__init__.py                      0      0   100%
invenio_communities/communities/records/mappings/__init__.py                         0      0   100%
invenio_communities/communities/records/mappings/os-v1/__init__.py                   0      0   100%
invenio_communities/communities/records/mappings/os-v2/__init__.py                   0      0   100%
invenio_communities/communities/records/mappings/v7/__init__.py                      0      0   100%
invenio_communities/communities/records/models.py                                   23      0   100%
invenio_communities/communities/records/systemfields/__init__.py                     0      0   100%
invenio_communities/communities/records/systemfields/access.py                     148     14    91%   136, 148, 154, 159, 170, 182, 194, 240, 264, 284-291, 304
invenio_communities/communities/records/systemfields/children.py                    50      3    94%   31, 74, 77
invenio_communities/communities/records/systemfields/deletion_status.py             59      6    90%   57, 61, 70, 75-78
invenio_communities/communities/records/systemfields/is_verified.py                 11      0   100%
invenio_communities/communities/records/systemfields/parent_community.py            53      2    96%   63-64
invenio_communities/communities/records/systemfields/pidslug.py                     44      3    93%   41, 51, 67
invenio_communities/communities/records/systemfields/tombstone.py                   96      4    96%   43, 139, 145, 177
invenio_communities/communities/resources/__init__.py                                3      0   100%
invenio_communities/communities/resources/args.py                                    5      0   100%
invenio_communities/communities/resources/config.py                                 21      0   100%
invenio_communities/communities/resources/resource.py                               91      6    93%   73-78, 89-96, 162-168
invenio_communities/communities/resources/serializer.py                              5      0   100%
invenio_communities/communities/resources/ui_schema.py                              75     17    77%   34-35, 50-61, 121-125, 132
invenio_communities/communities/schema.py                                          124      0   100%
invenio_communities/communities/services/__init__.py                                 4      0   100%
invenio_communities/communities/services/components.py                             188     10    95%   46, 57, 65, 80, 257, 283-284, 327, 331, 348
invenio_communities/communities/services/config.py                                  52      2    96%   81-85
invenio_communities/communities/services/facets.py                                   6      0   100%
invenio_communities/communities/services/links.py                                   34      1    97%   75
invenio_communities/communities/services/results.py                                 45      4    91%   76, 80, 100, 119
invenio_communities/communities/services/search_params.py                           14      1    93%   27
invenio_communities/communities/services/service.py                                258     21    92%   127, 305-306, 473, 480, 520-547, 634-638, 674-680, 716
invenio_communities/communities/services/sort.py                                    10      2    80%   32-33
invenio_communities/communities/services/uow.py                                     14      0   100%
invenio_communities/config.py                                                       50      0   100%
invenio_communities/errors.py                                                       29      1    97%   67
invenio_communities/ext.py                                                          73     10    86%   138-139, 144-189
invenio_communities/fixtures/__init__.py                                             0      0   100%
invenio_communities/fixtures/demo.py                                                 5      0   100%
invenio_communities/fixtures/tasks.py                                               42     13    69%   38-39, 42-43, 45-50, 76-79
invenio_communities/generators.py                                                  182     25    86%   74, 105-110, 150-151, 219-224, 228-229, 233-234, 254, 258, 281, 291, 295, 309, 365, 379, 397
invenio_communities/members/__init__.py                                              4      0   100%
invenio_communities/members/errors.py                                                3      0   100%
invenio_communities/members/records/__init__.py                                      3      0   100%
invenio_communities/members/records/api.py                                          94      2    98%   98-101
invenio_communities/members/records/mappings/__init__.py                             0      0   100%
invenio_communities/members/records/mappings/os-v1/__init__.py                       0      0   100%
invenio_communities/members/records/mappings/os-v2/__init__.py                       0      0   100%
invenio_communities/members/records/mappings/v7/__init__.py                          0      0   100%
invenio_communities/members/records/models.py                                       55      2    96%   100-101
invenio_communities/members/resources/__init__.py                                    3      0   100%
invenio_communities/members/resources/config.py                                     13      0   100%
invenio_communities/members/resources/resource.py                                   57      0   100%
invenio_communities/members/services/__init__.py                                     3      0   100%
invenio_communities/members/services/components.py                                  45      9    80%   34, 37, 41-48, 69
invenio_communities/members/services/config.py                                      46      0   100%
invenio_communities/members/services/facets.py                                       7      0   100%
invenio_communities/members/services/fields.py                                      22      8    64%   38-45
invenio_communities/members/services/request.py                                     53      0   100%
invenio_communities/members/services/schemas.py                                     81      0   100%
invenio_communities/members/services/service.py                                    239      9    96%   352, 546, 711, 715, 719, 723, 828, 833, 839
invenio_communities/notifications/__init__.py                                        0      0   100%
invenio_communities/notifications/builders.py                                       85      1    99%   309
invenio_communities/notifications/generators.py                                     28      1    96%   51
invenio_communities/permissions.py                                                  49      0   100%
invenio_communities/proxies.py                                                       8      0   100%
invenio_communities/records/__init__.py                                              0      0   100%
invenio_communities/records/records/__init__.py                                      0      0   100%
invenio_communities/records/records/models.py                                       17      0   100%
invenio_communities/records/records/systemfields/__init__.py                         2      0   100%
invenio_communities/records/records/systemfields/communities/__init__.py             0      0   100%
invenio_communities/records/records/systemfields/communities/context.py              4      1    75%   28
invenio_communities/records/records/systemfields/communities/field.py               40     14    65%   59, 64-111, 115-118
invenio_communities/records/records/systemfields/communities/manager.py             99      2    98%   167, 208
invenio_communities/requests/user_moderation/__init__.py                             2      0   100%
invenio_communities/requests/user_moderation/actions.py                             40     28    30%   32-60, 70-85, 95-99, 108-117
invenio_communities/requests/user_moderation/tasks.py                               16      8    50%   19-25, 31-35
invenio_communities/roles.py                                                        61      1    98%   80
invenio_communities/searchapp.py                                                     5      1    80%   18
invenio_communities/subcommunities/__init__.py                                       3      0   100%
invenio_communities/subcommunities/resources/__init__.py                             3      0   100%
invenio_communities/subcommunities/resources/config.py                              20      0   100%
invenio_communities/subcommunities/resources/resource.py                            18      0   100%
invenio_communities/subcommunities/services/__init__.py                              4      0   100%
invenio_communities/subcommunities/services/config.py                               22      0   100%
invenio_communities/subcommunities/services/errors.py                                2      0   100%
invenio_communities/subcommunities/services/request.py                              67     16    76%   50-57, 96-108, 116-128, 137-144, 187, 200
invenio_communities/subcommunities/services/schema.py                               16      1    94%   49
invenio_communities/subcommunities/services/service.py                              62     11    82%   45, 55, 84, 119, 136, 166-175
invenio_communities/tasks.py                                                         5      1    80%   22
invenio_communities/utils.py                                                        55      5    91%   107, 110-113
invenio_communities/views/__init__.py                                                3      0   100%
invenio_communities/views/api.py                                                    11      0   100%
invenio_communities/views/communities.py                                           172    107    38%   169, 179-191, 196, 201, 209-210, 218-219, 231-260, 269-277, 296-309, 329-334, 346-371, 388-392, 404-414, 433-437, 455-459, 471-475, 489-492, 505-509, 522-525, 537-546
invenio_communities/views/decorators.py                                             27     10    63%   28-38, 51-57
invenio_communities/views/template_loader.py                                        24      2    92%   46-47
invenio_communities/views/ui.py                                                     84     34    60%   54, 59-70, 81-84, 89, 100-103, 108-111, 116-123, 243-245, 250-260
invenio_communities/webpack.py                                                       2      0   100%
TOTAL                                                                             4043    543    87%
========== 713 passed, 1 skipped, 5010 warnings in 238.25s (0:03:58) ===========
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-opensearch-1  Stopping
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-opensearch-1  Stopped
 Container docker_services_cli-opensearch-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Container docker_services_cli-opensearch-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
