 redis Pulling 
 8e44f01296e3 Pulling fs layer 
 44fc29a25beb Pulling fs layer 
 39af693970c0 Pulling fs layer 
 517b08eaf3cc Pulling fs layer 
 186a03b51bfa Pulling fs layer 
 fe77c85f37cb Pulling fs layer 
 4f4fb700ef54 Pulling fs layer 
 a43f12641297 Pulling fs layer 
 517b08eaf3cc Waiting 
 fe77c85f37cb Waiting 
 4f4fb700ef54 Waiting 
 186a03b51bfa Waiting 
 a43f12641297 Waiting 
 39af693970c0 Downloading [==================================================>]     874B/874B
 39af693970c0 Verifying Checksum 
 39af693970c0 Download complete 
 8e44f01296e3 Downloading [>                                                  ]  294.4kB/28.23MB
 44fc29a25beb Downloading [==========================================>        ]     935B/1.105kB
 44fc29a25beb Downloading [==================================================>]  1.105kB/1.105kB
 44fc29a25beb Verifying Checksum 
 517b08eaf3cc Downloading [>                                                  ]  14.46kB/1.438MB
 517b08eaf3cc Verifying Checksum 
 517b08eaf3cc Download complete 
 186a03b51bfa Downloading [>                                                  ]  155.9kB/15.35MB
 8e44f01296e3 Downloading [=====================================>             ]  21.44MB/28.23MB
 8e44f01296e3 Verifying Checksum 
 8e44f01296e3 Download complete 
 fe77c85f37cb Downloading [==================================================>]      97B/97B
 fe77c85f37cb Verifying Checksum 
 fe77c85f37cb Download complete 
 8e44f01296e3 Extracting [>                                                  ]  294.9kB/28.23MB
 186a03b51bfa Verifying Checksum 
 186a03b51bfa Download complete 
 4f4fb700ef54 Downloading [==================================================>]      32B/32B
 4f4fb700ef54 Verifying Checksum 
 4f4fb700ef54 Download complete 
 a43f12641297 Downloading [==================================================>]     571B/571B
 a43f12641297 Verifying Checksum 
 a43f12641297 Download complete 
 8e44f01296e3 Extracting [==========>                                        ]  6.193MB/28.23MB
 8e44f01296e3 Extracting [=================>                                 ]  10.03MB/28.23MB
 8e44f01296e3 Extracting [===========================>                       ]  15.63MB/28.23MB
 8e44f01296e3 Extracting [=========================================>         ]   23.3MB/28.23MB
 8e44f01296e3 Extracting [==========================================>        ]  23.89MB/28.23MB
 8e44f01296e3 Extracting [===============================================>   ]  26.84MB/28.23MB
 8e44f01296e3 Extracting [================================================>  ]  27.43MB/28.23MB
 8e44f01296e3 Extracting [==================================================>]  28.23MB/28.23MB
 8e44f01296e3 Pull complete 
 44fc29a25beb Extracting [==================================================>]  1.105kB/1.105kB
 44fc29a25beb Extracting [==================================================>]  1.105kB/1.105kB
 44fc29a25beb Pull complete 
 39af693970c0 Extracting [==================================================>]     874B/874B
 39af693970c0 Extracting [==================================================>]     874B/874B
 39af693970c0 Pull complete 
 517b08eaf3cc Extracting [=>                                                 ]  32.77kB/1.438MB
 517b08eaf3cc Extracting [==================================================>]  1.438MB/1.438MB
 517b08eaf3cc Extracting [==================================================>]  1.438MB/1.438MB
 517b08eaf3cc Pull complete 
 186a03b51bfa Extracting [>                                                  ]  163.8kB/15.35MB
 186a03b51bfa Extracting [==========================>                        ]  8.192MB/15.35MB
 186a03b51bfa Extracting [==================================================>]  15.35MB/15.35MB
 186a03b51bfa Pull complete 
 fe77c85f37cb Extracting [==================================================>]      97B/97B
 fe77c85f37cb Extracting [==================================================>]      97B/97B
 fe77c85f37cb Pull complete 
 4f4fb700ef54 Extracting [==================================================>]      32B/32B
 4f4fb700ef54 Extracting [==================================================>]      32B/32B
 4f4fb700ef54 Pull complete 
 a43f12641297 Extracting [==================================================>]     571B/571B
 a43f12641297 Extracting [==================================================>]     571B/571B
 a43f12641297 Pull complete 
 redis Pulled 
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-redis-1  Creating
 Container docker_services_cli-redis-1  Created
 Container docker_services_cli-redis-1  Starting
 Container docker_services_cli-redis-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_cache
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, mock-3.15.1, pydocstyle-2.4.0
collected 53 items

tests/conftest.py ...                                                    [  5%]
tests/test_bccache.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
                                                [ 11%]
tests/test_decorator.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=80::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=110::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=118::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py,line=125::Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
                                             [ 18%]
tests/test_invenio_cache.py ....::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
..                                    [ 35%]
tests/test_locks.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py,line=55::datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
                                               [ 47%]
invenio_cache/__init__.py ....::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
                                           [ 54%]
invenio_cache/_compat.py ...                                             [ 60%]
invenio_cache/bccache.py ...                                             [ 66%]
invenio_cache/config.py ...                                              [ 71%]
invenio_cache/decorators.py ...                                          [ 77%]
invenio_cache/errors.py ...                                              [ 83%]
invenio_cache/ext.py ...                                                 [ 88%]
invenio_cache/lock.py ...                                                [ 94%]
invenio_cache/proxies.py ...                                             [100%]

=============================== warnings summary ===============================
tests/test_bccache.py: 1 warning
tests/test_decorator.py: 1 warning
tests/test_invenio_cache.py: 5 warnings
tests/test_locks.py: 4 warnings
invenio_cache/__init__.py: 1 warning
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py:145: DeprecationWarning: Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
    self._set_cache(app, config)

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:80: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:110: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:118: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=still_valid_with_entropy):

tests/test_decorator.py::test_decorator_cached_with_expiration
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/tests/test_decorator.py:125: PytestMockWarning: Mocks returned by pytest-mock do not need to be used as context managers. The mocker fixture automatically undoes mocking at the end of a test. This warning can be ignored if it was triggered by mocking a context manager. https://pytest-mock.readthedocs.io/en/latest/usage.html#usage-as-context-manager
    with mocker.patch("time.time", return_value=expired):

tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_context
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cached_mutex_renew
tests/test_locks.py::test_cache_failure
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/invenio_cache/lock.py:55: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self._created = datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                          Stmts   Miss  Cover   Missing
-----------------------------------------------------------
invenio_cache/__init__.py         7      0   100%
invenio_cache/_compat.py          4      0   100%
invenio_cache/bccache.py          7      0   100%
invenio_cache/config.py           8      0   100%
invenio_cache/decorators.py      46      0   100%
invenio_cache/errors.py          14      1    93%   21
invenio_cache/ext.py             28      0   100%
invenio_cache/lock.py            70     11    84%   70, 80, 84, 88, 92, 157, 206, 214-219, 222
invenio_cache/proxies.py          7      0   100%
-----------------------------------------------------------
TOTAL                           191     12    94%
======================= 53 passed, 25 warnings in 3.78s ========================
 Container docker_services_cli-redis-1  Stopping
 Container docker_services_cli-redis-1  Stopped
 Container docker_services_cli-redis-1  Removing
 Container docker_services_cli-redis-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
