============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/work/invenio-testrig/invenio-testrig/package-repo
configfile: setup.cfg
testpaths: tests, invenio_app
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collected 79 items

tests/conftest.py ...                                                    [  3%]
tests/test_app.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
..::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.....                                          [ 20%]
tests/test_celery.py ...                                                 [ 24%]
tests/test_cli.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
                                                    [ 27%]
tests/test_factory.py ....::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
                                              [ 34%]
tests/test_helpers.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
                                              [ 40%]
tests/test_limiter.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py,line=297::Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
                                              [ 46%]
tests/test_templating.py ...::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
.::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py,line=76::Set configuration variable SECRET_KEY with random string
::warning file=/home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py,line=145::Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
                                          [ 54%]
tests/test_wsgi.py ...                                                   [ 58%]
invenio_app/__init__.py ...                                              [ 62%]
invenio_app/celery.py ...                                                [ 65%]
invenio_app/cli.py ...                                                   [ 69%]
invenio_app/config.py ...                                                [ 73%]
invenio_app/ext.py ...                                                   [ 77%]
invenio_app/factory.py ...                                               [ 81%]
invenio_app/helpers.py ...                                               [ 84%]
invenio_app/limiter.py ...                                               [ 88%]
invenio_app/wsgi.py ...                                                  [ 92%]
invenio_app/wsgi_rest.py ...                                             [ 96%]
invenio_app/wsgi_ui.py ...                                               [100%]

=============================== warnings summary ===============================
tests/test_app.py: 5 warnings
tests/test_helpers.py: 3 warnings
tests/test_limiter.py: 3 warnings
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_limiter/extension.py:297: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
    warnings.warn(

tests/test_cli.py::test_basic_cli
tests/test_cli.py::test_basic_cli
tests/test_factory.py::test_config_loader
tests/test_factory.py::test_trusted_hosts
tests/test_templating.py::test_notheme
tests/test_templating.py::test_theme
tests/test_templating.py::test_theme_with_instance_templates
tests/test_templating.py::test_list_templaes
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/invenio_config/default.py:76: UserWarning: Set configuration variable SECRET_KEY with random string
    warnings.warn(

tests/test_cli.py::test_basic_cli
tests/test_cli.py::test_basic_cli
tests/test_factory.py::test_config_loader
tests/test_factory.py::test_trusted_hosts
tests/test_templating.py::test_notheme
tests/test_templating.py::test_theme
tests/test_templating.py::test_theme_with_instance_templates
tests/test_templating.py::test_list_templaes
  /home/runner/work/invenio-testrig/invenio-testrig/package-repo/.venv/lib/python3.12/site-packages/flask_caching/__init__.py:145: DeprecationWarning: Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
    self._set_cache(app, config)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /home/runner/work/invenio-testrig/invenio-testrig/artifacts/test-report-patched.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                       Stmts   Miss  Cover   Missing
--------------------------------------------------------
invenio_app/__init__.py        3      0   100%
invenio_app/celery.py          5      0   100%
invenio_app/cli.py             3      0   100%
invenio_app/config.py         29      0   100%
invenio_app/ext.py            62      3    95%   97, 115-116
invenio_app/factory.py        34      2    94%   62-63
invenio_app/helpers.py        55     10    82%   30, 73, 82-87, 111, 113
invenio_app/limiter.py        14      0   100%
invenio_app/wsgi.py            3      0   100%
invenio_app/wsgi_rest.py       2      0   100%
invenio_app/wsgi_ui.py         2      0   100%
--------------------------------------------------------
TOTAL                        212     15    93%
======================= 79 passed, 27 warnings in 7.56s ========================
