lists of files in version control and sdist match
WARNING: failed to reach any of the inventories with the following issues:
intersphinx inventory 'https://elasticsearch-py.readthedocs.io/en/master/objects.inv' not fetchable due to <class 'requests.exceptions.HTTPError'>: 404 Client Error: Not Found for url: https://elasticsearch-py.readthedocs.io/en/master/objects.inv
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_HOSTS:9: WARNING: py:class reference target not found: elasticsearch.connection.Urllib3HttpConnection [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_HOSTS:10: WARNING: py:class reference target not found: elasticsearch.connection.RequestsHttpConnection [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:137: WARNING: py:class reference target not found: elasticsearch.connection.Urllib3HttpConnection [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:138: WARNING: py:class reference target not found: elasticsearch.connection.RequestsHttpConnection [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:142: WARNING: py:class reference target not found: opensearchpy.connection.Urllib3HttpConnection [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:143: WARNING: py:class reference target not found: opensearchpy.connection.RequestsHttpConnection [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_CLIENT_CONFIG:3: WARNING: py:class reference target not found: elasticsearch.Elasticsearch [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_CLIENT_CONFIG:3: WARNING: py:class reference target not found: opensearchpy.OpenSearch [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_CLIENT_CONFIG:7: WARNING: py:class reference target not found: elasticsearch.Elasticsearch [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_CLIENT_CONFIG:8: WARNING: py:class reference target not found: elasticsearch.Transport [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_CLIENT_CONFIG:12: WARNING: py:class reference target not found: opensearchpy.OpenSearch [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docstring of invenio_search.config.SEARCH_CLIENT_CONFIG:13: WARNING: py:class reference target not found: opensearchpy.Transport [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:225: WARNING: py:class reference target not found: elasticsearch.Elasticsearch [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:225: WARNING: py:class reference target not found: opensearchpy.OpenSearch [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:226: WARNING: py:class reference target not found: elasticsearch.Transport [ref.class]
/home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/docs/configuration.rst:226: WARNING: py:class reference target not found: opensearchpy.Transport [ref.class]
WARNING: dot command 'dot' cannot be run (needed for graphviz output), check the graphviz_dot setting
 Network docker_services_cli_default  Creating
 Network docker_services_cli_default  Created
 Container docker_services_cli-opensearch-1  Creating
 Container docker_services_cli-postgresql-1  Creating
 Container docker_services_cli-opensearch-1  Created
 Container docker_services_cli-postgresql-1  Created
 Container docker_services_cli-postgresql-1  Starting
 Container docker_services_cli-opensearch-1  Starting
 Container docker_services_cli-postgresql-1  Started
 Container docker_services_cli-opensearch-1  Started
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/invenio-bug-verification/invenio-bug-verification/package-repo
configfile: setup.cfg
testpaths: docs, tests, invenio_search
plugins: github-actions-annotate-failures-0.3.0, pycodestyle-2.5.0, flask-1.3.0, black-ng-0.4.1, invenio-3.4.2, isort-4.0.0, cov-7.0.0, pydocstyle-2.4.0
collecting ... collected 140 items

docs/conf.py::PYDOCSTYLE PASSED
docs/conf.py::ISORT PASSED
docs/conf.py::black PASSED
tests/conftest.py::PYDOCSTYLE PASSED
tests/conftest.py::ISORT PASSED
tests/conftest.py::black PASSED
tests/mock_module/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/__init__.py::ISORT PASSED
tests/mock_module/__init__.py::black PASSED
tests/mock_module/component_templates/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/component_templates/__init__.py::ISORT PASSED
tests/mock_module/component_templates/__init__.py::black PASSED
tests/mock_module/component_templates/os-v2/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/component_templates/os-v2/__init__.py::ISORT PASSED
tests/mock_module/component_templates/os-v2/__init__.py::black PASSED
tests/mock_module/component_templates/v7/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/component_templates/v7/__init__.py::ISORT PASSED
tests/mock_module/component_templates/v7/__init__.py::black PASSED
tests/mock_module/index_templates/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/index_templates/__init__.py::ISORT PASSED
tests/mock_module/index_templates/__init__.py::black PASSED
tests/mock_module/index_templates/os-v2/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/index_templates/os-v2/__init__.py::ISORT PASSED
tests/mock_module/index_templates/os-v2/__init__.py::black PASSED
tests/mock_module/index_templates/v7/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/index_templates/v7/__init__.py::ISORT PASSED
tests/mock_module/index_templates/v7/__init__.py::black PASSED
tests/mock_module/mappings/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/mappings/__init__.py::ISORT PASSED
tests/mock_module/mappings/__init__.py::black PASSED
tests/mock_module/mappings/os-v1/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/mappings/os-v1/__init__.py::ISORT PASSED
tests/mock_module/mappings/os-v1/__init__.py::black PASSED
tests/mock_module/mappings/os-v2/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/mappings/os-v2/__init__.py::ISORT PASSED
tests/mock_module/mappings/os-v2/__init__.py::black PASSED
tests/mock_module/mappings/v7/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/mappings/v7/__init__.py::ISORT PASSED
tests/mock_module/mappings/v7/__init__.py::black PASSED
tests/mock_module/templates/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/templates/__init__.py::ISORT PASSED
tests/mock_module/templates/__init__.py::black PASSED
tests/mock_module/templates/os-v1/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/templates/os-v1/__init__.py::ISORT PASSED
tests/mock_module/templates/os-v1/__init__.py::black PASSED
tests/mock_module/templates/os-v2/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/templates/os-v2/__init__.py::ISORT PASSED
tests/mock_module/templates/os-v2/__init__.py::black PASSED
tests/mock_module/templates/v7/__init__.py::PYDOCSTYLE PASSED
tests/mock_module/templates/v7/__init__.py::ISORT PASSED
tests/mock_module/templates/v7/__init__.py::black PASSED
tests/test_cli.py::ISORT PASSED
tests/test_cli.py::black PASSED
tests/test_cli.py::test_init PASSED
tests/test_cli.py::test_list PASSED
tests/test_cli.py::test_check ::error file=package-repo/tests/test_cli.py,line=155::test_check%0A%0Aassert 0 > 0%0A +  where 0 = <Result okay>.exit_code
FAILED
tests/test_cli.py::test_create_put_and_delete PASSED
tests/test_invenio_search.py::ISORT PASSED
tests/test_invenio_search.py::black PASSED
tests/test_invenio_search.py::test_version PASSED
tests/test_invenio_search.py::test_init PASSED
tests/test_invenio_search.py::test_client_config PASSED
tests/test_invenio_search.py::test_flush_and_refresh PASSED
tests/test_invenio_search.py::test_client_reference PASSED
tests/test_invenio_search.py::test_default_client PASSED
tests/test_invenio_search.py::test_load_entry_point_group PASSED
tests/test_invenio_search.py::test_whitelisted_aliases[None-expected_aliases0] PASSED
tests/test_invenio_search.py::test_whitelisted_aliases[aliases_config1-expected_aliases1] PASSED
tests/test_invenio_search.py::test_whitelisted_aliases[aliases_config2-expected_aliases2] PASSED
tests/test_invenio_search.py::test_whitelisted_aliases[aliases_config3-expected_aliases3] PASSED
tests/test_invenio_search.py::test_whitelisted_aliases[aliases_config4-expected_aliases4] PASSED
tests/test_invenio_search.py::test_creating_alias_existing_index[-authors-authors-v1.0.0-None-expected0] PASSED
tests/test_invenio_search.py::test_creating_alias_existing_index[-None-authors-authors-v1.0.0-expected1] PASSED
tests/test_invenio_search.py::test_creating_alias_existing_index[-abc-authors-authors-v1.0.0-None-expected2] PASSED
tests/test_invenio_search.py::test_creating_alias_existing_index[-test-authors-authors-not-exist-None-expected3] PASSED
tests/test_invenio_search.py::test_prefix_search_mappings[aliases_config0-test--expected_aliases0] PASSED
tests/test_invenio_search.py::test_prefix_search_mappings[aliases_config1-dev--expected_aliases1] PASSED
tests/test_invenio_search.py::test_indices_prefix_empty_value PASSED
tests/test_invenio_search.py::test_indices_prefix_none_value PASSED
tests/test_invenio_search.py::test_indices_prefix_some_value PASSED
tests/test_invenio_search.py::test_templates_prefix_empty_value PASSED
tests/test_invenio_search.py::test_templates_prefix_none_value PASSED
tests/test_invenio_search.py::test_templates_prefix_some_value PASSED
tests/test_invenio_search.py::test_current_suffix PASSED
tests/test_invenio_search.py::test_not_dry_run_and_index_exists PASSED
tests/test_invenio_search.py::test_create_selected_indexes PASSED
tests/test_invenio_search.py::test_delete_selected_indexes PASSED
tests/test_invenio_search.py::test_create_when_indexes_already_exists_with_ignore_existing_true PASSED
tests/test_invenio_search.py::test_update_mappings PASSED
tests/test_query.py::ISORT PASSED
tests/test_query.py::black PASSED
tests/test_query.py::test_empty_query PASSED
tests/test_query.py::test_search_query PASSED
tests/test_query.py::test_es_preference_param_no_request PASSED
tests/test_query.py::test_es_preference_param PASSED
tests/test_query.py::test_recordsearchv2_without_preference_param PASSED
tests/test_query.py::test_recordsearchv2_with_preference_param PASSED
tests/test_query.py::test_search_query_min_score[RecordsSearch] PASSED
tests/test_query.py::test_search_query_min_score[RecordsSearchV2] PASSED
tests/test_query.py::test_prefix_index_from_meta PASSED
tests/test_query.py::test_prefix_index_from_kwargs[RecordsSearch] PASSED
tests/test_query.py::test_prefix_index_from_kwargs[RecordsSearchV2] PASSED
tests/test_query.py::test_prefix_index_list[RecordsSearch] PASSED
tests/test_query.py::test_prefix_index_list[RecordsSearchV2] PASSED
tests/test_query.py::test_prefix_multi_index_string[RecordsSearch] PASSED
tests/test_query.py::test_prefix_multi_index_string[RecordsSearchV2] PASSED
tests/test_utils.py::ISORT PASSED
tests/test_utils.py::black PASSED
tests/test_utils.py::test_build_suffix_index_name[parts0---records] PASSED
tests/test_utils.py::test_build_suffix_index_name[parts1-foo---foo-records] PASSED
tests/test_utils.py::test_build_suffix_index_name[parts2-foo---foo-records-record] PASSED
tests/test_utils.py::test_build_suffix_index_name[parts3---new-records-record-new] PASSED
tests/test_utils.py::test_build_suffix_index_name[parts4-foo---old-foo-test-recs-rec-old] PASSED
invenio_search/__init__.py::PYDOCSTYLE PASSED
invenio_search/__init__.py::ISORT PASSED
invenio_search/__init__.py::black PASSED
invenio_search/api.py::PYDOCSTYLE PASSED
invenio_search/api.py::ISORT PASSED
invenio_search/api.py::black PASSED
invenio_search/cli.py::PYDOCSTYLE PASSED
invenio_search/cli.py::ISORT PASSED
invenio_search/cli.py::black PASSED
invenio_search/config.py::PYDOCSTYLE PASSED
invenio_search/config.py::ISORT PASSED
invenio_search/config.py::black PASSED
invenio_search/engine.py::PYDOCSTYLE PASSED
invenio_search/engine.py::ISORT PASSED
invenio_search/engine.py::black PASSED
invenio_search/errors.py::PYDOCSTYLE PASSED
invenio_search/errors.py::ISORT PASSED
invenio_search/errors.py::black PASSED
invenio_search/ext.py::PYDOCSTYLE PASSED
invenio_search/ext.py::ISORT PASSED
invenio_search/ext.py::black PASSED
invenio_search/proxies.py::PYDOCSTYLE PASSED
invenio_search/proxies.py::ISORT PASSED
invenio_search/proxies.py::black PASSED
invenio_search/utils.py::PYDOCSTYLE PASSED
invenio_search/utils.py::ISORT PASSED
invenio_search/utils.py::black PASSED

=================================== FAILURES ===================================
__________________________________ test_check __________________________________

app = <Flask 'testapp'>

    def test_check(app):
        runner = CliRunner()
        script_info = ScriptInfo(create_app=lambda: app)
    
        result = runner.invoke(cmd, ["check"], obj=script_info)
        assert result.exit_code == 0
    
        wrong_version = search.VERSION[0] + 1
        with patch(
            "invenio_search.cli.search.VERSION",
            return_value=(wrong_version, 0, 0),
        ):
            result = runner.invoke(cmd, ["check"], obj=script_info)
>           assert result.exit_code > 0
E           assert 0 > 0
E            +  where 0 = <Result okay>.exit_code

app        = <Flask 'testapp'>
result     = <Result okay>
runner     = <click.testing.CliRunner object at 0x7efebfb2f740>
script_info = <flask.cli.ScriptInfo object at 0x7efebfb2f470>
wrong_version = 3

tests/test_cli.py:155: AssertionError
- generated xml file: /home/runner/work/invenio-bug-verification/invenio-bug-verification/artifacts/test-report-original.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                         Stmts   Miss  Cover   Missing
----------------------------------------------------------
invenio_search/__init__.py       5      0   100%
invenio_search/api.py          129      8    94%   50, 54, 58, 62, 106, 114, 250, 258
invenio_search/cli.py          122      7    94%   27, 41, 60, 120-126, 184-185
invenio_search/config.py        12      0   100%
invenio_search/engine.py        33     16    52%   26-28, 34-37, 48, 65-71, 76, 81, 86-87
invenio_search/errors.py         2      0   100%
invenio_search/ext.py          275     13    95%   119, 127-136, 225, 344, 373, 443-444, 460, 532, 536, 546
invenio_search/proxies.py        8      0   100%
invenio_search/utils.py         23      0   100%
----------------------------------------------------------
TOTAL                          609     44    93%
=========================== short test summary info ============================
FAILED tests/test_cli.py::test_check - assert 0 > 0
 +  where 0 = <Result okay>.exit_code
======================== 1 failed, 139 passed in 11.99s ========================
 Container docker_services_cli-opensearch-1  Stopping
 Container docker_services_cli-postgresql-1  Stopping
 Container docker_services_cli-postgresql-1  Stopped
 Container docker_services_cli-postgresql-1  Removing
 Container docker_services_cli-postgresql-1  Removed
 Container docker_services_cli-opensearch-1  Stopped
 Container docker_services_cli-opensearch-1  Removing
 Container docker_services_cli-opensearch-1  Removed
 Network docker_services_cli_default  Removing
 Network docker_services_cli_default  Removed
